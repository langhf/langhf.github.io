<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>frp 做内网穿透</title>
      <link href="/2019/08/22/frp%20%E5%81%9A%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"/>
      <url>/2019/08/22/frp%20%E5%81%9A%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><p>最近有个需求，需要把运行在内网的 web 服务暴露到公网，使得用户通过公网就可以访问到该 web 服务，这是一个典型的内网穿透场景。经过一番搜索，发现 frp 工具还挺好用的。frp 官网地址如下：<a href="https://github.com/fatedier/frp" target="_blank" rel="noopener">https://github.com/fatedier/frp</a>。</p><h2 id="通过-frp-做内网穿透"><a href="#通过-frp-做内网穿透" class="headerlink" title="通过 frp 做内网穿透"></a>通过 frp 做内网穿透</h2><p>要想将内网服务暴露到公网，必须借助 VPS 才行，可以租用一个云服务器。在 VPS 和内网服务机器上下载对应平台最新版本的 frp 压缩包，解压可以得到可执行文件 frps 和 frpc，以及配置文件 frps.ini 和 frpc.ini。</p><h3 id="运行-frps-服务"><a href="#运行-frps-服务" class="headerlink" title="运行 frps 服务"></a>运行 frps 服务</h3><p>在VPS上修改配置文件 frps.ini，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">bind_port = 7000</span><br><span class="line">token = passw0rd</span><br><span class="line">dashboard_port = 7500</span><br><span class="line">dashboard_user = admin</span><br><span class="line">dashboard_pwd = pass</span><br></pre></td></tr></table></figure></p><p>以上命令解释：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bind_port = 7000  // frps服务对外服务端口为7000，frpc需要连接到该VPS的7000端口才能使用frps服务</span><br><span class="line">token = passw0rd    // frpc 连接 frps 需要使用该 token，不然 frps 拒绝服务</span><br><span class="line">dashboard_port = 7500   // 开启 frps 的管理面板，浏览器访问 VPS 的 IP 和 7500 端口，然后输入下方的账号和密码即可管理</span><br><span class="line">dashboard_user = admin   // 管理面板账号名</span><br><span class="line">dashboard_pwd = pass    // 管理面板密码</span><br></pre></td></tr></table></figure></p><p>然后在命令行运行如下命令即可挂起 fprs 服务。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./frps -c ./frps.ini</span><br></pre></td></tr></table></figure></p><h3 id="运行-frpc-服务"><a href="#运行-frpc-服务" class="headerlink" title="运行 frpc 服务"></a>运行 frpc 服务</h3><p>在内网服务机器上，修改 frpc.ini，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">server_addr = xxx.xxx.xxx.xxx</span><br><span class="line">server_port = 7000</span><br><span class="line">token = passw0rd</span><br><span class="line"></span><br><span class="line">admin_addr = 127.0.0.1</span><br><span class="line">admin_port = 7400</span><br><span class="line">admin_user = admin</span><br><span class="line">admin_pwd = pass</span><br><span class="line"></span><br><span class="line">[web]</span><br><span class="line">type=tcp</span><br><span class="line">local_ip = 127.0.0.1</span><br><span class="line">local_port = 8080</span><br><span class="line">remote_port = 8080</span><br></pre></td></tr></table></figure></p><p>以上命令解释：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">server_addr = xxx.xxx.xxx.xxx   // VPS 的 IP 地址</span><br><span class="line">server_port = 700   // VPS 运行 frps 服务的端口</span><br><span class="line">token = passw0rd    // 连接 frps 服务需要用到的 token</span><br><span class="line"></span><br><span class="line">admin_addr = 127.0.0.1  // 本地管理界面 IP</span><br><span class="line">admin_port = 7400   // 本地管理界面端口</span><br><span class="line">admin_user = admin  // 本地管理界面用户账号</span><br><span class="line">admin_pwd = pass    // 本地管理界面用户密码</span><br><span class="line"></span><br><span class="line">[web]   // 本地要暴露的服务名称</span><br><span class="line">type = tcp  // 本地要暴露的服务类型</span><br><span class="line">local_ip = 127.0.0.1    // 本地要暴露的服务的 IP</span><br><span class="line">local_port = 8080   // 本地要暴露的服务的端口。比如说本地运行了一个 tomcat 服务，服务端口为 8080</span><br><span class="line">remote_port = 8080  // 希望使用 frps 所在的 VPS 的端口，不一定需要与 local_port 保持一致</span><br></pre></td></tr></table></figure></p><p>在命令行上运行以下命令即可：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./frpc -c ./frpc.ini</span><br></pre></td></tr></table></figure></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>通过上面配置好 frps 和 frpc 后，就可以通过 VPS 的 8080 端口访问内网的 8080 端口运行的服务。</p>]]></content>
      
      
      <categories>
          
          <category> 捣鼓 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> frp </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>记一次使用 samba 服务遇到的坑</title>
      <link href="/2019/03/28/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8%20samba%20%E6%9C%8D%E5%8A%A1%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91/"/>
      <url>/2019/03/28/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8%20samba%20%E6%9C%8D%E5%8A%A1%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91/</url>
      
        <content type="html"><![CDATA[<h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>服务端：Ubuntu 18.04<br>客户端：Windows 10 17134</p><h2 id="1-安装-smb-server"><a href="#1-安装-smb-server" class="headerlink" title="1.安装 smb server"></a>1.安装 smb server</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install samba</span><br></pre></td></tr></table></figure><p>修改配置文件，文件末尾添加如下几行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[sambashare]</span><br><span class="line">    comment = Samba on Ubuntu</span><br><span class="line">    path = /home/username/sambashare</span><br><span class="line">    read only = no</span><br><span class="line">    browsable = yes</span><br></pre></td></tr></table></figure></p><p>重启 smbd 服务：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart smbd.service</span><br></pre></td></tr></table></figure></p><p>设置访问密码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo smbpasswd -a &lt;username&gt;</span><br></pre></td></tr></table></figure></p><p>注意：username 为系统中存在的用户名</p><h2 id="2-windows-client-访问-smb-server"><a href="#2-windows-client-访问-smb-server" class="headerlink" title="2.windows client 访问 smb server"></a>2.windows client 访问 smb server</h2><p>正常情况下，直接在文件管理的地址栏输入ip和共享文件夹名就行，如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\\ip-address\sambashare</span><br></pre></td></tr></table></figure></p><p>注意：其中的 “sambashare” 为服务器配置文件中的中括号里面的名字，而不是服务器实际共享的文件夹名！</p><p>如果遇到 windows 主机不能访问服务器共享文件夹的情况，请看以下解决方法。<br>总结一下就是，建立如下 .reg 脚本，然后双击运行就可以：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Windows Registry Editor Version 5.00</span><br><span class="line">[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanWorkstation\Parameters]</span><br><span class="line"></span><br><span class="line">&quot;AllowInsecureGuestAuth&quot;=dword:00000001</span><br></pre></td></tr></table></figure></p><h2 id="参考连接"><a href="#参考连接" class="headerlink" title="参考连接"></a>参考连接</h2><p><a href="https://tutorials.ubuntu.com/tutorial/install-and-configure-samba#0" target="_blank" rel="noopener">1.install-and-configure-samba</a><br><a href="https://blog.csdn.net/weivnuo/article/details/80934241" target="_blank" rel="noopener">2.windows 10 0x80070035 找不到网络路径</a></p>]]></content>
      
      
      <categories>
          
          <category> 折腾 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> samba </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>基于 Docker 搭建局域网 Gitlab 服务</title>
      <link href="/2018/12/20/%E5%9F%BA%E4%BA%8E%20Docker%20%E6%90%AD%E5%BB%BA%E5%B1%80%E5%9F%9F%E7%BD%91%20Gitlab%20%E6%9C%8D%E5%8A%A1/"/>
      <url>/2018/12/20/%E5%9F%BA%E4%BA%8E%20Docker%20%E6%90%AD%E5%BB%BA%E5%B1%80%E5%9F%9F%E7%BD%91%20Gitlab%20%E6%9C%8D%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><pre><code>操作系统：Ubuntu 18.04Docker Server 版本：18.09.0</code></pre><h2 id="安装-docker-ce"><a href="#安装-docker-ce" class="headerlink" title="安装 docker-ce"></a>安装 docker-ce</h2><ol><li><p>安装必要的软件包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install apt-transport-https ca-certificates curl software-properties-common</span><br></pre></td></tr></table></figure></li><li><p>添加软件源的 GPG 密钥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg | sudo apt-key add</span><br><span class="line">-</span><br></pre></td></tr></table></figure></li><li><p>向 source.list 中添加 Docker 软件源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository \</span><br><span class="line"><span class="string">"deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu \</span></span><br><span class="line"><span class="string"><span class="variable">$(lsb_release -cs)</span> \</span></span><br><span class="line"><span class="string">stable"</span></span><br></pre></td></tr></table></figure></li><li><p>安装 docker-ce</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install docker-ce</span><br></pre></td></tr></table></figure></li><li><p>启动 docker 守护进程,并开机自动启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start docker</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> docker</span><br></pre></td></tr></table></figure></li><li><p>将当前用户加入 docker 组，然后注销重新登录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker <span class="variable">$USER</span></span><br></pre></td></tr></table></figure></li><li><p>测试 docker 是否正确安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run hello-world</span><br></pre></td></tr></table></figure></li></ol><p>参考：<br><a href="https://yeasy.gitbooks.io/docker_practice/content/" target="_blank" rel="noopener">Docker-从入门到实践</a></p><h2 id="运行-gitlab-ce-的-docker-镜像"><a href="#运行-gitlab-ce-的-docker-镜像" class="headerlink" title="运行 gitlab-ce 的 docker 镜像"></a>运行 gitlab-ce 的 docker 镜像</h2><ol><li><p>下载最新的 gitlab-ce 镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull gitlab/gitlab-ce:latest</span><br></pre></td></tr></table></figure></li><li><p>安装 docker-compose</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install docker-compose</span><br></pre></td></tr></table></figure></li><li><p>编写 docker-compose.yml 文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3'</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">    gitlab:</span></span><br><span class="line"><span class="attr">        image:</span> <span class="string">gitlab/gitlab-ce:latest</span></span><br><span class="line"><span class="attr">        hostname:</span> <span class="string">'&lt;ip&gt;'</span></span><br><span class="line"><span class="attr">        environment:</span></span><br><span class="line"><span class="attr">            GITLAB_OMNIBUS_CONFIG:</span> <span class="string">|</span></span><br><span class="line"><span class="string">                external_url 'https://&lt;ip&gt;:30443'</span></span><br><span class="line"><span class="string">                gitlab_rails['gitlab_shell_ssh_port'] = 30022</span></span><br><span class="line"><span class="string"></span><span class="attr">        ports:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">'80:80'</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">'30443:443'</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">'30022:22'</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">./config:/etc/gitlab</span> </span><br><span class="line"><span class="bullet">            -</span> <span class="string">./logs:/var/log/gitlab</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">./data:/var/opt/gitlab</span></span><br><span class="line"><span class="attr">        restart:</span> <span class="string">always</span></span><br></pre></td></tr></table></figure></li></ol><p>配置说明：</p><pre><code>主机 80 端口直接映射到容器 80 端口。主机 30443 端口映射到容器 443 端口。主机 30022 端口映射到容器 22 端口，为了能够使用 gitlab 的 ssh 功能。主机 config 文件夹保留容器内 gitlab 的配置。主机 logs 文件夹保留容器内 gitlab 运行日志。主机 data 文件夹保留容器内 gitlab 的运行数据，如用户上传文件等。</code></pre><p>参考：<br><a href="https://docs.gitlab.com/omnibus/docker/#install-gitlab-using-docker-compose" target="_blank" rel="noopener">GitLab Docs</a><br><a href="https://juejin.im/post/5a4c9ff36fb9a04507700fcc" target="_blank" rel="noopener">通过 docker 搭建自用的 gitlab 服务</a></p>]]></content>
      
      
      <categories>
          
          <category> 折腾 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Gitlab </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Spring Boot 学习资源</title>
      <link href="/2018/11/22/Spring%20Boot%20%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90/"/>
      <url>/2018/11/22/Spring%20Boot%20%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90/</url>
      
        <content type="html"><![CDATA[<h2 id="1-入门书籍"><a href="#1-入门书籍" class="headerlink" title="1. 入门书籍"></a>1. 入门书籍</h2><p><a href="https://book.douban.com/subject/26857423/" target="_blank" rel="noopener">《Spring Boot 实战》</a>：这本书上的代码跟官网上给的代码有些不一样，而且官网上给的代码还不一定能运行。大致浏览一遍该书，了解 Spring Boot 的一些关键概念倒是可以。</p><h2 id="2-官方-Guides"><a href="#2-官方-Guides" class="headerlink" title="2. 官方 Guides"></a>2. 官方 Guides</h2><p><a href="https://spring.io/guides/gs/rest-service/" target="_blank" rel="noopener">Building a RESTful Web Service</a><br><a href="https://spring.io/guides/gs/spring-boot-docker/" target="_blank" rel="noopener">Spring Boot with Docker</a><br><a href="https://spring.io/guides/gs/accessing-data-mysql/" target="_blank" rel="noopener">Accessing data with MySQL</a><br><a href="https://spring.io/guides/gs/securing-web/" target="_blank" rel="noopener">Securing a Web Application</a><br>除了上面这些经常会用到的之外，这些链接的网站下面还有更多的 Guides ，涉及到数据库，RESTful 服务，API 文档生成 等等。</p><h2 id="3-官方-Samples"><a href="#3-官方-Samples" class="headerlink" title="3. 官方 Samples"></a>3. 官方 Samples</h2><p><a href="https://github.com/spring-io/sagan" target="_blank" rel="noopener">Sagan </a>    spring.io 官网的源码！<br><a href="https://github.com/spring-io/initializr" target="_blank" rel="noopener">Initializr</a>    创建 spring boot 项目的工具。</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Docker 资源整理</title>
      <link href="/2018/10/21/Docker%20%E8%B5%84%E6%BA%90%E6%95%B4%E7%90%86/"/>
      <url>/2018/10/21/Docker%20%E8%B5%84%E6%BA%90%E6%95%B4%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="1-学习资源"><a href="#1-学习资源" class="headerlink" title="1. 学习资源"></a>1. 学习资源</h2><p><a href="https://yeasy.gitbooks.io/docker_practice/content/" target="_blank" rel="noopener">Docker 从入门到实践</a></p><p><a href="https://github.com/wsargent/docker-cheat-sheet/tree/master/zh-cn#docker-cheat-sheet" target="_blank" rel="noopener">docker-cheat-sheet</a></p><p><a href="http://search.dangdang.com/?key=docker%BC%BC%CA%F5%C8%EB%C3%C5%D3%EB%CA%B5%D5%BD%20%B5%DA3%B0%E6&amp;act=input" target="_blank" rel="noopener">http://search.dangdang.com/?key=docker%BC%BC%CA%F5%C8%EB%C3%C5%D3%EB%CA%B5%D5%BD%20%B5%DA3%B0%E6&amp;act=input</a></p><h2 id="2-Docker-GUI-工具"><a href="#2-Docker-GUI-工具" class="headerlink" title="2. Docker GUI 工具"></a>2. Docker GUI 工具</h2><p><a href="https://dockstation.io/" target="_blank" rel="noopener">DockStation</a></p><h2 id="3-官方文档"><a href="#3-官方文档" class="headerlink" title="3. 官方文档"></a>3. 官方文档</h2><p><a href="https://docs.docker.com/" target="_blank" rel="noopener">https://docs.docker.com/</a><br><a href="https://docs.docker.com/compose/" target="_blank" rel="noopener">https://docs.docker.com/compose/</a></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Git 忽略文件夹下的文件，但是保留空文件夹</title>
      <link href="/2018/10/21/Git%20%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%8C%E4%BD%86%E6%98%AF%E4%BF%9D%E7%95%99%E7%A9%BA%E6%96%87%E4%BB%B6%E5%A4%B9/"/>
      <url>/2018/10/21/Git%20%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%8C%E4%BD%86%E6%98%AF%E4%BF%9D%E7%95%99%E7%A9%BA%E6%96%87%E4%BB%B6%E5%A4%B9/</url>
      
        <content type="html"><![CDATA[<p>最近在做项目发现，想用 git 忽略掉所有日志文件，但是发现那样也会忽略掉日志文件夹，这样显得项目的结构不够完整，于是找到如下解决方法.</p><p>假设项目文件夹结构如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+-- smartlock</span><br><span class="line">    +-- conf</span><br><span class="line">    |   +-- nginx.conf</span><br><span class="line">    |   +-- mime.types</span><br><span class="line">    |   +-- fastcgi.conf</span><br><span class="line">    +-- logs</span><br><span class="line">    +-- html</span><br><span class="line">    |   +-- css</span><br><span class="line">    |   +-- js</span><br><span class="line">    |   +-- images</span><br></pre></td></tr></table></figure></p><p>想要忽略掉 logs 文件夹下所有的日志文件，但是想保留 logs 文件夹以保持项目文件夹结构的完整性。可以在 logs 文件夹里新建 .gitignore 文件，文件内容如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># ignore all except .gitignore file</span><br><span class="line">*</span><br><span class="line">!.gitignore</span><br></pre></td></tr></table></figure></p><p>然后 git add . ，就可以将 logs 文件夹添加进 git 缓存了。</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>推送镜像到 Docker Hub</title>
      <link href="/2018/10/21/%E6%8E%A8%E9%80%81%E9%95%9C%E5%83%8F%E5%88%B0%20Docker%20Hub/"/>
      <url>/2018/10/21/%E6%8E%A8%E9%80%81%E9%95%9C%E5%83%8F%E5%88%B0%20Docker%20Hub/</url>
      
        <content type="html"><![CDATA[<h2 id="1-登录-Docker-Hub"><a href="#1-登录-Docker-Hub" class="headerlink" title="1. 登录 Docker Hub"></a>1. 登录 Docker Hub</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login</span><br></pre></td></tr></table></figure><p>根据提示，输入注册 docker hub 时的用户名和密码</p><h2 id="2-重新-tag-镜像"><a href="#2-重新-tag-镜像" class="headerlink" title="2. 重新 tag 镜像"></a>2. 重新 tag 镜像</h2><p>推送命令为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push 注册用户名/镜像名</span><br></pre></td></tr></table></figure></p><p>因此要把将推送的镜像规范命名，如下所示，格式为： 注册用户名/镜像名:版本号<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag &lt;IMAGE_NAME&gt; drelang/smartlock:v1</span><br></pre></td></tr></table></figure></p><p>重命名的镜像不会重新占用物理空间，只是在原有的镜像上再打一个标签。</p><h2 id="3-推送到-Docker-Hub"><a href="#3-推送到-Docker-Hub" class="headerlink" title="3. 推送到 Docker Hub"></a>3. 推送到 Docker Hub</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push drelang/smartlock:v1</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Docker Hub </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>理解 Nginx 下的 fastcgi.conf 文件</title>
      <link href="/2018/10/21/%E7%90%86%E8%A7%A3%20Nginx%20%E4%B8%8B%E7%9A%84%20fastcgi.conf%20%E6%96%87%E4%BB%B6/"/>
      <url>/2018/10/21/%E7%90%86%E8%A7%A3%20Nginx%20%E4%B8%8B%E7%9A%84%20fastcgi.conf%20%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<p>最近用 docker 来搭建 nginx + php-fpm 服务器，参考网上的教程后发现了一个不太明白的地方。Docker-compose.yml 文件如下：<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3'</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">    openresty:</span></span><br><span class="line"><span class="attr">        image:</span> <span class="string">openresty/openresty:alpine</span></span><br><span class="line"><span class="attr">        network_mode:</span> <span class="string">"host"</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">./:/home</span></span><br><span class="line"><span class="attr">        command:</span> <span class="string">openresty</span> <span class="bullet">-p</span> <span class="string">/home</span> <span class="bullet">-c</span> <span class="string">conf/nginx.conf</span> <span class="bullet">-g</span> <span class="string">"daemon off;"</span></span><br><span class="line"><span class="attr">        restart:</span> <span class="string">always</span></span><br><span class="line"></span><br><span class="line"><span class="attr">    php73-fpm:</span></span><br><span class="line"><span class="attr">        image:</span> <span class="attr">php:7.3-rc-fpm-alpine</span></span><br><span class="line"><span class="attr">        network_mode:</span> <span class="string">"host"</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">./:/home</span></span><br><span class="line"><span class="attr">        restart:</span> <span class="string">always</span></span><br></pre></td></tr></table></figure></p><p><strong>疑惑点</strong>：php73-fpm 容器下必须挂载 openresty 挂载过的文件卷？</p><p>带着疑问，在 google 上找到了答案。</p><p>Nginx 与 php-fpm 通信过程是通过 nginx 的 fastcgi 模块来处理的，即 fastcgi 模块将来自客户端的关于 php 文件的请求转发给 php-fpm 来处理。既然是转发请求，那么必须要遵循一定的协议，也就是 fastcgi.conf 所规定的协议了。</p><p>nginx.conf 中配置处理 php 文件的 location 规则如下：<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">        <span class="attribute">root</span> /home/php;</span><br><span class="line">        <span class="attribute">fastcgi_pass</span> <span class="number">127.0.0.1:9000</span>;</span><br><span class="line">        <span class="attribute">include</span> fastcgi.conf;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>fastcgi.conf 文件内容如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;</span><br><span class="line">fastcgi_param  QUERY_STRING       $query_string;</span><br><span class="line">fastcgi_param  REQUEST_METHOD     $request_method;</span><br><span class="line">fastcgi_param  CONTENT_TYPE       $content_type;</span><br><span class="line">fastcgi_param  CONTENT_LENGTH     $content_length;</span><br><span class="line"></span><br><span class="line">fastcgi_param  SCRIPT_NAME        $fastcgi_script_name;</span><br><span class="line">fastcgi_param  REQUEST_URI        $request_uri;</span><br><span class="line">fastcgi_param  DOCUMENT_URI       $document_uri;</span><br><span class="line">fastcgi_param  DOCUMENT_ROOT      $document_root;</span><br><span class="line">fastcgi_param  SERVER_PROTOCOL    $server_protocol;</span><br><span class="line">fastcgi_param  REQUEST_SCHEME     $scheme;</span><br><span class="line">fastcgi_param  HTTPS              $https if_not_empty;</span><br><span class="line"></span><br><span class="line">fastcgi_param  GATEWAY_INTERFACE  CGI/1.1;</span><br><span class="line">fastcgi_param  SERVER_SOFTWARE    nginx/$nginx_version;</span><br><span class="line"></span><br><span class="line">fastcgi_param  REMOTE_ADDR        $remote_addr;</span><br><span class="line">fastcgi_param  REMOTE_PORT        $remote_port;</span><br><span class="line">fastcgi_param  SERVER_ADDR        $server_addr;</span><br><span class="line">fastcgi_param  SERVER_PORT        $server_port;</span><br><span class="line">fastcgi_param  SERVER_NAME        $server_name;</span><br><span class="line"></span><br><span class="line"># PHP only, required if PHP was built with --enable-force-cgi-redirect</span><br><span class="line">fastcgi_param  REDIRECT_STATUS    200;</span><br></pre></td></tr></table></figure></p><p>其中，fastcgi_param指令指定放置PHP动态程序的主目录，也就是$fastcgi_script_name前面指定的路径，此处就是 /home/php。也就是说客户端请求 /home/php/xxx.php 文件， nginx 不能解析该文件，于是按照 fastcgi.conf 规定的规则将该请求转发给 php-fpm，其中规则指明了 php-fpm 到哪里去寻找 php 文件！</p><p>再回到前面的那个 docker 疑惑点，也就能明白为何要在 php-fpm 容器里挂载文件卷了，不然 php-fpm 容器找不到客户端要请求的 php 文件。</p><p>参考博客：</p><ol><li><a href="http://geekyplatypus.com/dockerise-your-php-application-with-nginx-and-php7-fpm/" target="_blank" rel="noopener">Dockerise your PHP application with Nginx and PHP7-FPM</a></li><li><a href="https://segmentfault.com/a/1190000007322358" target="_blank" rel="noopener">Nginx+Php-fpm运行原理详解</a></li><li><a href="https://study.holmesian.org/nginx/StandardHTTPModules/FastCGI.html" target="_blank" rel="noopener">FastCGI模块（FastCGI）</a></li><li><a href="https://www.cnblogs.com/JohnABC/p/3529786.html" target="_blank" rel="noopener">PHP-FastCGI详解</a></li><li><a href="http://www.laruence.com/2008/08/12/180.html" target="_blank" rel="noopener">深入理解Zend SAPIs(Zend SAPI Internals)</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Ubuntu 开启防火墙/开启端口</title>
      <link href="/2018/10/18/Ubuntu%20%E5%BC%80%E5%90%AF%E9%98%B2%E7%81%AB%E5%A2%99%E5%BC%80%E5%90%AF%E7%AB%AF%E5%8F%A3/"/>
      <url>/2018/10/18/Ubuntu%20%E5%BC%80%E5%90%AF%E9%98%B2%E7%81%AB%E5%A2%99%E5%BC%80%E5%90%AF%E7%AB%AF%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="1-查看本地端口开启情况"><a href="#1-查看本地端口开启情况" class="headerlink" title="1. 查看本地端口开启情况"></a>1. 查看本地端口开启情况</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ sudo ufw status</span><br><span class="line">状态： 激活</span><br><span class="line"></span><br><span class="line">至                          动作          来自</span><br><span class="line">-                          --          --</span><br><span class="line">80                         ALLOW       Anywhere                  </span><br><span class="line">8001                       ALLOW       Anywhere                  </span><br><span class="line">80 (v6)                    ALLOW       Anywhere (v6)             </span><br><span class="line">8001 (v6)                  ALLOW       Anywhere (v6)</span><br></pre></td></tr></table></figure><p>开启防火墙的状态下，只有系统允许的端口才能被其他主机访问。</p><h2 id="2-关闭防火墙"><a href="#2-关闭防火墙" class="headerlink" title="2. 关闭防火墙"></a>2. 关闭防火墙</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ sudo ufw <span class="built_in">disable</span></span><br><span class="line">防火墙在系统启动时自动禁用</span><br><span class="line">➜  ~ sudo ufw status</span><br><span class="line">状态：不活动</span><br></pre></td></tr></table></figure><h2 id="3-开启防火墙，允许访问特定端口"><a href="#3-开启防火墙，允许访问特定端口" class="headerlink" title="3. 开启防火墙，允许访问特定端口"></a>3. 开启防火墙，允许访问特定端口</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ sudo ufw <span class="built_in">enable</span> </span><br><span class="line">在系统启动时启用和激活防火墙</span><br><span class="line">➜  ~ sudo ufw allow 81</span><br><span class="line">规则已添加</span><br><span class="line">规则已添加 (v6)</span><br><span class="line">➜  ~ sudo ufw status</span><br><span class="line">状态： 激活</span><br><span class="line"></span><br><span class="line">至                          动作          来自</span><br><span class="line">-                          --          --</span><br><span class="line">80                         ALLOW       Anywhere                  </span><br><span class="line">8001                       ALLOW       Anywhere                  </span><br><span class="line">81                         ALLOW       Anywhere                  </span><br><span class="line">80 (v6)                    ALLOW       Anywhere (v6)             </span><br><span class="line">8001 (v6)                  ALLOW       Anywhere (v6)             </span><br><span class="line">81 (v6)                    ALLOW       Anywhere (v6)</span><br></pre></td></tr></table></figure><h2 id="4-不允许访问特定端口"><a href="#4-不允许访问特定端口" class="headerlink" title="4. 不允许访问特定端口"></a>4. 不允许访问特定端口</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ sudo ufw deny 81</span><br><span class="line">规则已更新</span><br><span class="line">规则已更新 (v6)</span><br><span class="line">➜  ~ sudo ufw status</span><br><span class="line">状态： 激活</span><br><span class="line"></span><br><span class="line">至                          动作          来自</span><br><span class="line">-                          --          --</span><br><span class="line">80                         ALLOW       Anywhere                  </span><br><span class="line">8001                       ALLOW       Anywhere                  </span><br><span class="line">81                         DENY        Anywhere                  </span><br><span class="line">80 (v6)                    ALLOW       Anywhere (v6)             </span><br><span class="line">8001 (v6)                  ALLOW       Anywhere (v6)             </span><br><span class="line">81 (v6)                    DENY        Anywhere (v6)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 折腾 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ufw </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Ubuntu18.04 安装 sublime-text-3，并支持中文输入</title>
      <link href="/2018/10/16/Ubuntu18.04%20%E5%AE%89%E8%A3%85%20sublime-text-3%EF%BC%8C%E5%B9%B6%E6%94%AF%E6%8C%81%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5/"/>
      <url>/2018/10/16/Ubuntu18.04%20%E5%AE%89%E8%A3%85%20sublime-text-3%EF%BC%8C%E5%B9%B6%E6%94%AF%E6%8C%81%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<h2 id="安装-sublime-text-3"><a href="#安装-sublime-text-3" class="headerlink" title="安装 sublime-text-3"></a>安装 sublime-text-3</h2><p>sublime 官网推荐添加 apt-get 源来在线安装，但是不知道为啥，电脑一直添加不了安装源，于是放弃。然而，官网提供的压缩包，也下载不了，也因此放弃。最后，找到了一个可靠的压缩包来源 <a href="https://www.techspot.com/downloads/5546-sublime-text.html" target="_blank" rel="noopener">https://www.techspot.com/downloads/5546-sublime-text.html </a></p><p>下载压缩包后，将压缩包放到 /opt 文件夹下，然后解压命令如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -jxvf sublime_text_3_build_3176_x64.tar.bz2</span><br></pre></td></tr></table></figure></p><p>解压后得到文件夹 sublime_text_3，注意此时的解压文件，因为后面会用到。<br>此时，做一个软链接，就可以在命令行启动 sublime 了，软链接命令如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s /opt/sublime_text_3/sublime_text /usr/bin/subl</span><br></pre></td></tr></table></figure></p><h2 id="支持中文输入"><a href="#支持中文输入" class="headerlink" title="支持中文输入"></a>支持中文输入</h2><p>Github 有人整理了解决让 sublime 支持中文输入的问题，源码地址如下：<br><a href="https://github.com/lyfeyaj/sublime-text-imfix" target="_blank" rel="noopener">https://github.com/lyfeyaj/sublime-text-imfix</a></p><p>按照提示，直接一条 ./sublime-imfix 命令即可修复问题，但是由于我是从源码安装的 sublime，因此要修改 src/subl 文件才行。</p><p>原文件内容如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so</span><br><span class="line"><span class="built_in">exec</span> /opt/sublime_text/sublime_text <span class="string">"<span class="variable">$@</span>"</span></span><br></pre></td></tr></table></figure></p><p>改成如下内容即可，主要是第四行的路径，让 shell 脚本找到 sublime 可执行文件即可<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so</span><br><span class="line"><span class="built_in">exec</span> /opt/sublime_text/sublime_text_3/sublime_text <span class="string">"<span class="variable">$@</span>"</span></span><br></pre></td></tr></table></figure></p><p>最后，别忘记将系统的输入法改成 fcitx !!!</p>]]></content>
      
      
      <categories>
          
          <category> 折腾 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Sublime-text-3 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Git 无法添加文件夹下的文件</title>
      <link href="/2018/10/15/Git%20%E6%97%A0%E6%B3%95%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B6/"/>
      <url>/2018/10/15/Git%20%E6%97%A0%E6%B3%95%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<p>无论使用啥命令，都无法将文件夹下的某些文件添加进 Git 进行版本控制，Git 提示信息如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">尚未暂存以备提交的变更：</span><br><span class="line">  （使用 <span class="string">"git add &lt;文件&gt;..."</span> 更新要提交的内容）</span><br><span class="line">  （使用 <span class="string">"git checkout -- &lt;文件&gt;..."</span> 丢弃工作区的改动）</span><br><span class="line">  （提交或丢弃子模组中未跟踪或修改的内容）</span><br><span class="line"></span><br><span class="line">        修改：     php/getui (修改的内容, 未跟踪的内容)</span><br></pre></td></tr></table></figure></p><p>后来经过艰难的搜索，终于发现原来是子文件夹下面含有 .git 文件夹，因此导致该子文件夹无法被 Git 跟踪，可以通过以下方法解决：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git rm --cached folder</span><br><span class="line">git add folder</span><br></pre></td></tr></table></figure></p><p>其中 folder 为子文件夹。</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>sql插入数据已经存在，则执行update更新</title>
      <link href="/2018/10/14/sql%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E5%B7%B2%E7%BB%8F%E5%AD%98%E5%9C%A8%EF%BC%8C%E5%88%99%E6%89%A7%E8%A1%8Cupdate%E6%9B%B4%E6%96%B0/"/>
      <url>/2018/10/14/sql%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E5%B7%B2%E7%BB%8F%E5%AD%98%E5%9C%A8%EF%BC%8C%E5%88%99%E6%89%A7%E8%A1%8Cupdate%E6%9B%B4%E6%96%B0/</url>
      
        <content type="html"><![CDATA[<p>原文地址：<a href="http://www.111cn.net/database/mysql/76509.htm" target="_blank" rel="noopener">http://www.111cn.net/database/mysql/76509.htm</a></p><p>总结下，最好用的语法应该如下：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">replace</span> <span class="keyword">into</span> testtb(<span class="keyword">id</span>,<span class="keyword">name</span>,age)<span class="keyword">values</span>(<span class="number">1</span>,<span class="string">"aa"</span>,<span class="number">12</span>);</span><br></pre></td></tr></table></figure></p><p>其中 testtb 为表名，id为主键，一定要设置主键。如果上述记录不存在，则插入该条新纪录；如果上述记录存在，则更新该记录.</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> 转载 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>MySQL 5.7 添加用户，授权，删除用户</title>
      <link href="/2018/10/10/MySQL%205.7%20%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%EF%BC%8C%E6%8E%88%E6%9D%83%EF%BC%8C%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7/"/>
      <url>/2018/10/10/MySQL%205.7%20%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%EF%BC%8C%E6%8E%88%E6%9D%83%EF%BC%8C%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7/</url>
      
        <content type="html"><![CDATA[<h2 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line">create user &apos;&lt;USERNAME&gt;&apos;@&apos;&lt;HOST&gt;&apos; identified by &apos;&lt;PASSWORD&gt;&apos;;</span><br></pre></td></tr></table></figure><p><strong>USERNAME：</strong>为登录 mysql 的用户名。<br><strong>HOST：</strong>为登录 mysql 的主机地址。如 HOST=localhost 时，只能本地访问；HOST=% 时，任何主机都可以访问，但是要修改文件 /etc/mysql/mysql.conf.d/mysqld.cnf ，注释掉 bind-address = 127.0.0.1；若要指定一定网段的 HOST，则可以将网段设置如下: HOST=192.168.8.% 。<br><strong>PASSWORD</strong>：用 USERNAME 指定的用户的登录密码。</p><h2 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> &lt;DATABASE_NAME&gt; <span class="keyword">default</span> <span class="keyword">charset</span> utf8mb4 <span class="keyword">collate</span> utf8mb4_general_ci;</span><br><span class="line"><span class="keyword">grant</span> all <span class="keyword">privileges</span> <span class="keyword">on</span> &lt;DATABASE_NAME&gt;.* <span class="keyword">to</span> <span class="string">'&lt;USERNAME&gt;'</span>@<span class="string">'&lt;HOST&gt;'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'&lt;PASSWORD&gt;'</span>;</span><br></pre></td></tr></table></figure><p>以上命令先创建了一个名为 DATABASE_NAME 的数据库，字符集为 utf8。然后将所有权限授予了主机地址为 HOST，用户名为 USERNAME，密码为 PASSWORD 的用户。</p><h2 id="删除数据库、用户"><a href="#删除数据库、用户" class="headerlink" title="删除数据库、用户"></a>删除数据库、用户</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">database</span> &lt;DATABASE_NAME&gt;;    <span class="comment">-- 删除数据库</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> <span class="string">'&lt;USERNAME&gt;'</span>@<span class="string">'&lt;HOST&gt;'</span>;  <span class="comment">-- 删除用户</span></span><br></pre></td></tr></table></figure><h2 id="查看数据库所有用户、主机地址和密码"><a href="#查看数据库所有用户、主机地址和密码" class="headerlink" title="查看数据库所有用户、主机地址和密码"></a>查看数据库所有用户、主机地址和密码</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> mysql;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">user</span>,host,authentication_string <span class="keyword">from</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure><h2 id="执行-SQL-文件"><a href="#执行-SQL-文件" class="headerlink" title="执行 SQL 文件"></a>执行 SQL 文件</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /path/to/sql_file</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>nginx lua/openresty 相关资源整理</title>
      <link href="/2018/10/10/nginx%20luaopenresty%20%E7%9B%B8%E5%85%B3%E8%B5%84%E6%BA%90%E6%95%B4%E7%90%86/"/>
      <url>/2018/10/10/nginx%20luaopenresty%20%E7%9B%B8%E5%85%B3%E8%B5%84%E6%BA%90%E6%95%B4%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="Lua-包管理工具："><a href="#Lua-包管理工具：" class="headerlink" title="Lua 包管理工具："></a>Lua 包管理工具：</h2><p>Lua的包管理工具为 luarocks，在官网 <a href="https://luarocks.org/" target="_blank" rel="noopener">https://luarocks.org/</a> 可以找到各种有用的 lua 包。</p><h2 id="openresty-手册："><a href="#openresty-手册：" class="headerlink" title="openresty 手册："></a>openresty 手册：</h2><p><a href="https://www.nginx.com/resources/wiki/modules/lua/" target="_blank" rel="noopener">https://www.nginx.com/resources/wiki/modules/lua/</a></p><h2 id="一些有质量的-openresty-的库和资源："><a href="#一些有质量的-openresty-的库和资源：" class="headerlink" title="一些有质量的 openresty 的库和资源："></a>一些有质量的 openresty 的库和资源：</h2><p>参看 Github 上别人的整理  <a href="https://github.com/bungle/awesome-resty#authentication-and-authorization" target="_blank" rel="noopener">https://github.com/bungle/awesome-resty#authentication-and-authorization</a></p><p>##相关书籍：</p><ol><li>《深入理解 Nginx：模块开发与架构解析》第二版，陶辉 著。</li><li>《Nginx Lua 开发实战》，李明江 著。</li></ol><p>持续更新。。</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> Lua </tag>
            
            <tag> Openresty </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>openresty1.13 与 nginx+php7.0-fpm 压测对比</title>
      <link href="/2018/09/27/openresty1.13%20%E4%B8%8E%20nginx+php7.0-fpm%20%E5%8E%8B%E6%B5%8B%E5%AF%B9%E6%AF%94/"/>
      <url>/2018/09/27/openresty1.13%20%E4%B8%8E%20nginx+php7.0-fpm%20%E5%8E%8B%E6%B5%8B%E5%AF%B9%E6%AF%94/</url>
      
        <content type="html"><![CDATA[<p>为了验证下 openresty 官网所说的比 nginx+php-fpm 的吞吐量要高，因此做了以下测试，本次测试服务器硬件配置如下:</p><p>Dell latitude 3330</p><p>CPU: 4 core  Intel(R) Core(TM) i5-3337U CPU @ 1.80GHz</p><p>MEM: 8GB</p><p>本次测试两种架构下，服务器都发送 “Hello,world!” 这一字符串。</p><h2 id="1-100并发，50k请求"><a href="#1-100并发，50k请求" class="headerlink" title="1. 100并发，50k请求"></a>1. 100并发，50k请求</h2><p>以下为 openresty 的压测结果<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ ab -c 100 -n 50000 -q http://192.168.8.156:8090/</span><br><span class="line">This is ApacheBench, Version 2.3 &lt;<span class="variable">$Revision</span>: 1706008 $&gt;</span><br><span class="line">Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/</span><br><span class="line">Licensed to The Apache Software Foundation, http://www.apache.org/</span><br><span class="line"></span><br><span class="line">Benchmarking 192.168.8.156 (be patient).....<span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Server Software:        openresty/1.13.6.2</span><br><span class="line">Server Hostname:        192.168.8.156</span><br><span class="line">Server Port:            8090</span><br><span class="line"></span><br><span class="line">Document Path:          /</span><br><span class="line">Document Length:        20 bytes</span><br><span class="line"></span><br><span class="line">Concurrency Level:      100</span><br><span class="line">Time taken <span class="keyword">for</span> tests:   2.743 seconds</span><br><span class="line">Complete requests:      50000</span><br><span class="line">Failed requests:        0</span><br><span class="line">Total transferred:      8400000 bytes</span><br><span class="line">HTML transferred:       1000000 bytes</span><br><span class="line">Requests per second:    18226.60 [<span class="comment">#/sec] (mean)</span></span><br><span class="line">Time per request:       5.486 [ms] (mean)</span><br><span class="line">Time per request:       0.055 [ms] (mean, across all concurrent requests)</span><br><span class="line">Transfer rate:          2990.30 [Kbytes/sec] received</span><br><span class="line"></span><br><span class="line">Connection Times (ms)</span><br><span class="line">              min  mean[+/-sd] median   max</span><br><span class="line">Connect:        1    2   0.6      2       5</span><br><span class="line">Processing:     1    3   0.7      3      10</span><br><span class="line">Waiting:        1    2   0.6      2      10</span><br><span class="line">Total:          4    5   0.5      5      15</span><br><span class="line"></span><br><span class="line">Percentage of the requests served within a certain time (ms)</span><br><span class="line">  50%      5</span><br><span class="line">  66%      6</span><br><span class="line">  75%      6</span><br><span class="line">  80%      6</span><br><span class="line">  90%      6</span><br><span class="line">  95%      6</span><br><span class="line">  98%      6</span><br><span class="line">  99%      7</span><br><span class="line"> 100%     15 (longest request)</span><br></pre></td></tr></table></figure></p><p>以下为 nginx+php7.0-fpm 的压测结果<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ ab -c 100 -n 50000 -q http://192.168.8.156:8080/test.php</span><br><span class="line">This is ApacheBench, Version 2.3 &lt;<span class="variable">$Revision</span>: 1706008 $&gt;</span><br><span class="line">Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/</span><br><span class="line">Licensed to The Apache Software Foundation, http://www.apache.org/</span><br><span class="line"></span><br><span class="line">Benchmarking 192.168.8.156 (be patient).....<span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Server Software:        nginx/1.15.3</span><br><span class="line">Server Hostname:        192.168.8.156</span><br><span class="line">Server Port:            8080</span><br><span class="line"></span><br><span class="line">Document Path:          /test.php</span><br><span class="line">Document Length:        13 bytes</span><br><span class="line"></span><br><span class="line">Concurrency Level:      100</span><br><span class="line">Time taken <span class="keyword">for</span> tests:   3.380 seconds</span><br><span class="line">Complete requests:      50000</span><br><span class="line">Failed requests:        0</span><br><span class="line">Total transferred:      7500000 bytes</span><br><span class="line">HTML transferred:       650000 bytes</span><br><span class="line">Requests per second:    14791.25 [<span class="comment">#/sec] (mean)</span></span><br><span class="line">Time per request:       6.761 [ms] (mean)</span><br><span class="line">Time per request:       0.068 [ms] (mean, across all concurrent requests)</span><br><span class="line">Transfer rate:          2166.69 [Kbytes/sec] received</span><br><span class="line"></span><br><span class="line">Connection Times (ms)</span><br><span class="line">              min  mean[+/-sd] median   max</span><br><span class="line">Connect:        0    1   0.6      0       5</span><br><span class="line">Processing:     2    6   1.2      6      14</span><br><span class="line">Waiting:        1    6   1.3      6      14</span><br><span class="line">Total:          4    7   1.1      6      15</span><br><span class="line">WARNING: The median and mean <span class="keyword">for</span> the initial connection time are not within a normal deviation</span><br><span class="line">        These results are probably not that reliable.</span><br><span class="line"></span><br><span class="line">Percentage of the requests served within a certain time (ms)</span><br><span class="line">  50%      6</span><br><span class="line">  66%      7</span><br><span class="line">  75%      7</span><br><span class="line">  80%      8</span><br><span class="line">  90%      8</span><br><span class="line">  95%      9</span><br><span class="line">  98%     10</span><br><span class="line">  99%     11</span><br><span class="line"> 100%     15 (longest request)</span><br></pre></td></tr></table></figure></p><h2 id="2-1k并发，50k请求"><a href="#2-1k并发，50k请求" class="headerlink" title="2. 1k并发，50k请求"></a>2. 1k并发，50k请求</h2><p>以下为 openresty 的压测结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ ab -c 1000 -n 50000 -q http://192.168.8.156:8090/       </span><br><span class="line">This is ApacheBench, Version 2.3 &lt;$Revision: 1706008 $&gt;</span><br><span class="line">Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/</span><br><span class="line">Licensed to The Apache Software Foundation, http://www.apache.org/</span><br><span class="line"></span><br><span class="line">Benchmarking 192.168.8.156 (be patient).....done</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Server Software:        openresty/1.13.6.2</span><br><span class="line">Server Hostname:        192.168.8.156</span><br><span class="line">Server Port:            8090</span><br><span class="line"></span><br><span class="line">Document Path:          /</span><br><span class="line">Document Length:        20 bytes</span><br><span class="line"></span><br><span class="line">Concurrency Level:      1000</span><br><span class="line">Time taken for tests:   3.445 seconds</span><br><span class="line">Complete requests:      50000</span><br><span class="line">Failed requests:        0</span><br><span class="line">Total transferred:      8400000 bytes</span><br><span class="line">HTML transferred:       1000000 bytes</span><br><span class="line">Requests per second:    14514.61 [#/sec] (mean)</span><br><span class="line">Time per request:       68.896 [ms] (mean)</span><br><span class="line">Time per request:       0.069 [ms] (mean, across all concurrent requests)</span><br><span class="line">Transfer rate:          2381.30 [Kbytes/sec] received</span><br><span class="line"></span><br><span class="line">Connection Times (ms)</span><br><span class="line">              min  mean[+/-sd] median   max</span><br><span class="line">Connect:       10   24  22.2     23    1030</span><br><span class="line">Processing:     7   35  30.5     33     772</span><br><span class="line">Waiting:        5   27  30.7     25     771</span><br><span class="line">Total:         27   58  37.1     57    1057</span><br><span class="line"></span><br><span class="line">Percentage of the requests served within a certain time (ms)</span><br><span class="line">  50%     57</span><br><span class="line">  66%     60</span><br><span class="line">  75%     61</span><br><span class="line">  80%     62</span><br><span class="line">  90%     63</span><br><span class="line">  95%     64</span><br><span class="line">  98%     67</span><br><span class="line">  99%     75</span><br><span class="line"> 100%   1057 (longest request)</span><br></pre></td></tr></table></figure></p><p>以下为 nginx+php7.0-fpm 的压测结果<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ ab -c 1000 -n 50000 -q http://192.168.8.156:8080/test.php</span><br><span class="line">This is ApacheBench, Version 2.3 &lt;<span class="variable">$Revision</span>: 1706008 $&gt;</span><br><span class="line">Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/</span><br><span class="line">Licensed to The Apache Software Foundation, http://www.apache.org/</span><br><span class="line"></span><br><span class="line">Benchmarking 192.168.8.156 (be patient).....<span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Server Software:        nginx/1.15.3</span><br><span class="line">Server Hostname:        192.168.8.156</span><br><span class="line">Server Port:            8080</span><br><span class="line"></span><br><span class="line">Document Path:          /test.php</span><br><span class="line">Document Length:        13 bytes</span><br><span class="line"></span><br><span class="line">Concurrency Level:      1000</span><br><span class="line">Time taken <span class="keyword">for</span> tests:   5.165 seconds</span><br><span class="line">Complete requests:      50000</span><br><span class="line">Failed requests:        14407</span><br><span class="line">   (Connect: 0, Receive: 0, Length: 14407, Exceptions: 0)</span><br><span class="line">Non-2xx responses:      14407</span><br><span class="line">Total transferred:      14962826 bytes</span><br><span class="line">HTML transferred:       7579767 bytes</span><br><span class="line">Requests per second:    9680.80 [<span class="comment">#/sec] (mean)</span></span><br><span class="line">Time per request:       103.297 [ms] (mean)</span><br><span class="line">Time per request:       0.103 [ms] (mean, across all concurrent requests)</span><br><span class="line">Transfer rate:          2829.14 [Kbytes/sec] received</span><br><span class="line"></span><br><span class="line">Connection Times (ms)</span><br><span class="line">              min  mean[+/-sd] median   max</span><br><span class="line">Connect:        7   28 114.9     14    1043</span><br><span class="line">Processing:     7   34  64.3     23    2021</span><br><span class="line">Waiting:        7   31  64.2     20    2021</span><br><span class="line">Total:         14   62 133.9     37    3028</span><br><span class="line"></span><br><span class="line">Percentage of the requests served within a certain time (ms)</span><br><span class="line">  50%     37</span><br><span class="line">  66%     42</span><br><span class="line">  75%     46</span><br><span class="line">  80%     48</span><br><span class="line">  90%     57</span><br><span class="line">  95%     72</span><br><span class="line">  98%    387</span><br><span class="line">  99%   1034</span><br><span class="line"> 100%   3028 (longest request)</span><br></pre></td></tr></table></figure></p><h2 id="3-总结"><a href="#3-总结" class="headerlink" title="3. 总结"></a>3. 总结</h2><table><thead><tr><th>并发情况</th><th>吞吐量</th><th>平均完成时间</th><th>90%完成时间</th></tr></thead><tbody><tr><td>c100 n50k</td><td>18226.6/14791.25</td><td>5/7</td><td>6/8</td></tr><tr><td>c1k  n50k</td><td>14514.61/9680.80</td><td>58/62</td><td>63/57</td></tr></tbody></table><p>​<br>以上数据对比格式为： openresty/nginx+php7.0-fpm</p><p>从上面对比情况可以看出，openresty 在并发情况下吞吐量的确要比 nginx+php7.0-fpm 高。</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> openresty </tag>
            
            <tag> nginx </tag>
            
            <tag> php7.0-fpm </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Linux 查看 cpu, mem, disk 和 network 信息</title>
      <link href="/2018/09/13/Linux%20%E6%9F%A5%E7%9C%8B%20cpu,%20mem,%20disk%20%E5%92%8C%20network%20%E4%BF%A1%E6%81%AF/"/>
      <url>/2018/09/13/Linux%20%E6%9F%A5%E7%9C%8B%20cpu,%20mem,%20disk%20%E5%92%8C%20network%20%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<p>对于一个 Linux 服务器来说，cpu 的主频以及占用率，内存的大小以及占用率，磁盘 I/O 速率和网卡 I/O 速率极大地影响着服务器的性能。在 Linux 系统下，开发者提供了/proc 文件系统来提供系统相关的进程信息</p><h2 id="1-查看-cpu-主频和占用率"><a href="#1-查看-cpu-主频和占用率" class="headerlink" title="1.查看 cpu 主频和占用率"></a>1.查看 cpu 主频和占用率</h2><p>Linux 下 CPU 的主频有两种获取方式，一种是通过读取 /proc/cpuinfo 文件，另外一种是利用 CPU 主频的计算原理编写程序获取。此处只介绍前一种方式。即使用命令 cat /proc/cpuinfo 。从下方图片可以看到，本人的电脑是双核 CPU，主频都为 2.60GHz。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">Lance<span class="comment"># cat /proc/cpuinfo</span></span><br><span class="line">processor       : 0</span><br><span class="line">vendor_id       : GenuineIntel</span><br><span class="line">cpu family      : 6</span><br><span class="line">model           : 23</span><br><span class="line">model name      : Pentium(R) Dual-Core  CPU      E5300  @ 2.60GHz</span><br><span class="line">stepping        : 10</span><br><span class="line">microcode       : 0xa0b</span><br><span class="line">cpu MHz         : 1200.000</span><br><span class="line">cache size      : 2048 KB</span><br><span class="line">physical id     : 0</span><br><span class="line">siblings        : 2</span><br><span class="line">core id         : 0</span><br><span class="line">cpu cores       : 2</span><br><span class="line">apicid          : 0</span><br><span class="line">initial apicid  : 0</span><br><span class="line">fpu             : yes</span><br><span class="line">fpu_exception   : yes</span><br><span class="line">cpuid level     : 13</span><br><span class="line">wp              : yes</span><br><span class="line">flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx lm constant_tsc arch_perfmon pebs bts rep_good nopl cpuid aperfmperf pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm xsave lahf_lm pti tpr_shadow vnmi flexpriority dtherm</span><br><span class="line">bugs            : cpu_meltdown spectre_v1 spectre_v2</span><br><span class="line">bogomips        : 5186.86</span><br><span class="line">clflush size    : 64</span><br><span class="line">cache_alignment : 64</span><br><span class="line">address sizes   : 36 bits physical, 48 bits virtual</span><br><span class="line">power management:</span><br><span class="line"></span><br><span class="line">processor       : 1</span><br><span class="line">vendor_id       : GenuineIntel</span><br><span class="line">cpu family      : 6</span><br><span class="line">model           : 23</span><br><span class="line">model name      : Pentium(R) Dual-Core  CPU      E5300  @ 2.60GHz</span><br><span class="line">stepping        : 10</span><br><span class="line">microcode       : 0xa0b</span><br><span class="line">cpu MHz         : 1200.000</span><br><span class="line">cache size      : 2048 KB</span><br><span class="line">physical id     : 0</span><br><span class="line">siblings        : 2</span><br><span class="line">core id         : 1</span><br><span class="line">cpu cores       : 2</span><br><span class="line">apicid          : 1</span><br><span class="line">initial apicid  : 1</span><br><span class="line">fpu             : yes</span><br><span class="line">fpu_exception   : yes</span><br><span class="line">cpuid level     : 13</span><br><span class="line">wp              : yes</span><br><span class="line">flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx lm constant_tsc arch_perfmon pebs bts rep_good nopl cpuid aperfmperf pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm xsave lahf_lm pti tpr_shadow vnmi flexpriority dtherm</span><br><span class="line">bugs            : cpu_meltdown spectre_v1 spectre_v2</span><br><span class="line">bogomips        : 5186.86</span><br><span class="line">clflush size    : 64</span><br><span class="line">cache_alignment : 64</span><br><span class="line">address sizes   : 36 bits physical, 48 bits virtual</span><br><span class="line">power management:</span><br></pre></td></tr></table></figure></p><p>Linux 下 CPU 的使用状态可分为用户态、系统态以及空闲态。CPU 占用率可以用如下公式计算</p><pre><code>CPU占用率 = CPU执行非系统空闲进程时间/CPU执行总时间</code></pre><p>/proc/stat 文件对 CPU 的使用情况进行了实时的记录，如下图所示：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Lance<span class="comment"># cat /proc/stat</span></span><br><span class="line">cpu  525228 16439 390034 139932703 224352 0 2010 0 0 0</span><br><span class="line">cpu0 265224 6822 197250 70017169 60063 0 74 0 0 0</span><br><span class="line">cpu1 260004 9617 192784 69915534 164289 0 1936 0 0 0</span><br><span class="line">intr 126884204 43 2 0 0 0 0 0 1 0 3 0 0 4 0 0 0 124 0 2 1404563 0 0 0 0 955106 514 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span><br><span class="line">ctxt 193899569</span><br><span class="line">btime 1536131324</span><br><span class="line">processes 268172</span><br><span class="line">procs_running 1</span><br><span class="line">procs_blocked 0</span><br><span class="line">softirq 101783843 10 36600014 116255 1002291 1058479 0 263 35993177 0 27013354</span><br></pre></td></tr></table></figure></p><p>其中首行的 10 个参数含义如下：</p><pre><code>user    nice    system  idle    iowait  irq softirq steal   guest   guest_niceuser:用户态的CPU时间nice：低优先级程序所占用的用户态的cpu时间。system：系统态的CPU时间idle：CPU空闲的时间iowait：等待IO响应的时间irq：处理硬件中断的时间softirq：处理软中断的时间steal: 处理其他所花的时间guest：运行时间为客户操作系统下的虚拟CPU控制guest_nice：访客的低优先级程序所占用的用户态的cpu时间</code></pre><p>余下的参数中：</p><pre><code>intr: 第一个参数表示的是自系统启动以来，发生的所有中断的次数；其他的数对应一个特定中断发生的次数ctxt: cpu自系统启动以来发生的上下文交换次数btime: 系统启动到现在的时间 UTC 秒processes: 表示系统启动以来创建的进程个数procs_running: 当前运行进程的个数procs_blocked: 当前被阻塞的进程个数softirq: 显示软中断情况</code></pre><p>要计算 CPU 在某段时间内的占用率，可以分别记录下 t1 和 t2 时刻的 CPU 总的状态和空闲状态，因此：</p><pre><code>CPU占用率 = 1 - ( idle2 - idle1 ) / (total2 - total1)</code></pre><p>其中 total 表示 10 个参数之和。</p><h2 id="2-查看内存大小及占用率"><a href="#2-查看内存大小及占用率" class="headerlink" title="2. 查看内存大小及占用率"></a>2. 查看内存大小及占用率</h2><p>/proc/meminfo 记录了内存信息。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">Lance<span class="comment"># cat /proc/meminfo</span></span><br><span class="line">MemTotal:        4003752 kB</span><br><span class="line">MemFree:          517464 kB</span><br><span class="line">MemAvailable:    3144816 kB</span><br><span class="line">Buffers:          257152 kB</span><br><span class="line">Cached:          2289308 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:          1455916 kB</span><br><span class="line">Inactive:        1487740 kB</span><br><span class="line">Active(anon):     277376 kB</span><br><span class="line">Inactive(anon):   174624 kB</span><br><span class="line">Active(file):    1178540 kB</span><br><span class="line">Inactive(file):  1313116 kB</span><br><span class="line">Unevictable:           0 kB</span><br><span class="line">Mlocked:               0 kB</span><br><span class="line">SwapTotal:       6253564 kB</span><br><span class="line">SwapFree:        6253564 kB</span><br><span class="line">Dirty:                 8 kB</span><br><span class="line">Writeback:             0 kB</span><br><span class="line">AnonPages:        395168 kB</span><br><span class="line">Mapped:           207872 kB</span><br><span class="line">Shmem:             54808 kB</span><br><span class="line">Slab:             460364 kB</span><br><span class="line">SReclaimable:     425200 kB</span><br><span class="line">SUnreclaim:        35164 kB</span><br><span class="line">KernelStack:        5376 kB</span><br><span class="line">PageTables:        22064 kB</span><br><span class="line">NFS_Unstable:          0 kB</span><br><span class="line">Bounce:                0 kB</span><br><span class="line">WritebackTmp:          0 kB</span><br><span class="line">CommitLimit:     8255440 kB</span><br><span class="line">Committed_AS:    2553704 kB</span><br><span class="line">VmallocTotal:   34359738367 kB</span><br><span class="line">VmallocUsed:           0 kB</span><br><span class="line">VmallocChunk:          0 kB</span><br><span class="line">HardwareCorrupted:     0 kB</span><br><span class="line">AnonHugePages:      2048 kB</span><br><span class="line">ShmemHugePages:        0 kB</span><br><span class="line">ShmemPmdMapped:        0 kB</span><br><span class="line">CmaTotal:              0 kB</span><br><span class="line">CmaFree:               0 kB</span><br><span class="line">HugePages_Total:       0</span><br><span class="line">HugePages_Free:        0</span><br><span class="line">HugePages_Rsvd:        0</span><br><span class="line">HugePages_Surp:        0</span><br><span class="line">Hugepagesize:       2048 kB</span><br><span class="line">DirectMap4k:      113216 kB</span><br><span class="line">DirectMap2M:     4044800 kB</span><br></pre></td></tr></table></figure></p><p>其中：</p><pre><code>MemTotal：表示系统可支配内存MemAvailable：表示应用程序可用的内存</code></pre><p>因此，内存占用率可以用如下公式计算：</p><h2 id="3-查看磁盘-I-O占用率"><a href="#3-查看磁盘-I-O占用率" class="headerlink" title="3.查看磁盘 I/O占用率"></a>3.查看磁盘 I/O占用率</h2><p>安装 sysstat 工具，它的子工具 iostat 可以显示 I/O 占用率。%util 参数表示 1s内用于 I/O 请求所用时间的比例，%util 值越高，I/O 占用率越高，可直接使用这个参数来代表 I/O 占用率<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Lance<span class="comment"># iostat -x</span></span><br><span class="line">Linux 4.13.0-32-generic (Lance)         2018年09月13日  _x86_64_        (2 CPU)</span><br><span class="line"></span><br><span class="line">avg-cpu:  %user   %nice %system %iowait  %steal   %idle</span><br><span class="line">           0.37    0.01    0.28    0.16    0.00   99.17</span><br><span class="line"></span><br><span class="line">Device            r/s     w/s     rkB/s     wkB/s   rrqm/s   wrqm/s  %rrqm  %wrqm r_await w_await aqu-sz rareq-sz wareq-sz  svctm  %util</span><br><span class="line">loop0            0.00    0.00      0.00      0.00     0.00     0.00   0.00   0.00   21.41    0.00   0.00     2.44     0.00  20.89   0.00</span><br><span class="line">loop1            0.00    0.00      0.00      0.00     0.00     0.00   0.00   0.00   44.62    0.00   0.00     1.69     0.00  11.38   0.00</span><br><span class="line">loop2            0.00    0.00      0.00      0.00     0.00     0.00   0.00   0.00   19.93    0.00   0.00     9.65     0.00  12.31   0.00</span><br><span class="line">loop3            0.00    0.00      0.00      0.00     0.00     0.00   0.00   0.00   41.81    0.00   0.00    14.23     0.00  18.88   0.00</span><br><span class="line">loop4            0.01    0.00      0.01      0.00     0.00     0.00   0.00   0.00    6.61    0.00   0.00     1.12     0.00   0.50   0.00</span><br><span class="line">loop5            0.00    0.00      0.00      0.00     0.00     0.00   0.00   0.00    0.00    0.00   0.00     1.60     0.00   0.00   0.00</span><br><span class="line">sda              0.24    0.52      3.45     14.18     0.17     0.56  41.05  51.90    3.56   31.99   0.02    14.40    27.51   4.51   0.34</span><br></pre></td></tr></table></figure></p><h2 id="4-查看网络带宽使用率"><a href="#4-查看网络带宽使用率" class="headerlink" title="4. 查看网络带宽使用率"></a>4. 查看网络带宽使用率</h2><p>/proc/net/dev 文件中记录了网络相关的使用情况，其中分别记录了发送和接收的数据包总数、收发的错误包数以及收发的丢失包数等。取单位时间内发送和接收的数据包总包数(totalPackets)，除以网络的基本带宽（bandWidth）:<br>                                  pnet = 100%*totalPackets/bandWidth</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Lance<span class="comment"># cat /proc/net/dev</span></span><br><span class="line">Inter-|   Receive                                                |  Transmit</span><br><span class="line"> face |bytes    packets errs drop fifo frame compressed multicast|bytes    packets errs drop fifo colls carrier compressed</span><br><span class="line">    lo: 2729345   46942    0    0    0     0          0         0  2729345   46942    0    0    0     0       0          0</span><br><span class="line">enp2s0: 558026941  723202    0 11733    0     0          0    105753 23827630  275738    0    0    0     0       0          0</span><br></pre></td></tr></table></figure><pre><code>bytes: 接口发送或接收的总字节数packets: 接口发送或接收的总数据包数errs: 有设备驱动程序检测到的发送或者接收错误的总数drop: 设备驱动程序丢弃的数据包总数fifo: FIFO 缓冲区错误的数量frame: 分组帧错误的数量colls: 接口上检测到的冲突数compressed: 设备驱动程序发送或接收的压缩数据包数carrier: 由设备驱动程序检测到的载波损耗的数量multicast: 设备驱动程序发送或接收的多播帧数</code></pre>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Cpu </tag>
            
            <tag> Mem </tag>
            
            <tag> Disk </tag>
            
            <tag> Network </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>CentOS 从源码编译并安装 Nginx</title>
      <link href="/2018/09/12/CentOS%20%E4%BB%8E%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%B9%B6%E5%AE%89%E8%A3%85%20Nginx/"/>
      <url>/2018/09/12/CentOS%20%E4%BB%8E%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%B9%B6%E5%AE%89%E8%A3%85%20Nginx/</url>
      
        <content type="html"><![CDATA[<h2 id="Linux-系统要求"><a href="#Linux-系统要求" class="headerlink" title="Linux 系统要求"></a>Linux 系统要求</h2><p>Nginx 在 Linux 操作系统下运行的时候，要想获取高并发能力，要求 Linux 内核必须在 2.6 以上，可通过以下命令查看 Linux 内核版本。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ uname -r</span><br><span class="line">2.6.18-128.e15</span><br></pre></td></tr></table></figure></p><h2 id="安装-Nginx-的必备软件"><a href="#安装-Nginx-的必备软件" class="headerlink" title="安装 Nginx 的必备软件"></a>安装 Nginx 的必备软件</h2><p>通过以下命令安装使用 Nginx 必备的软件：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum update</span><br><span class="line">$ sudo yum install -y gcc gcc-c++ pcre pcre-devel zlib zlib-devel openssl openssl-devel</span><br></pre></td></tr></table></figure></p><p>其中：</p><ol><li>gcc 和 gcc-c++ 为 c/c++ 编译器</li><li>PCRE 即 Perl 兼容正则表达式，如果我们在 nginx.conf 中使用到了正则表达式，那么必须在编译时将 pcre 库编译进 Nginx。pcre-devel 是使用 PCRE 做二次开发时所需要的开发库，包括头文件，这也是编译时所必需的。</li><li>lib 库用于对 HTTP 包的内容做 gzip 格式的压缩。zlib-devel 是二次开发所需要的库。</li><li>open-ssl 用来支持 SSL。<h2 id="编译与安装"><a href="#编译与安装" class="headerlink" title="编译与安装"></a>编译与安装</h2>从 Nginx 官网  <a href="https://nginx.org/en/download.html" target="_blank" rel="noopener">https://nginx.org/en/download.html</a> 下载最新的 Nginx 源码，放在任意目录下，然后解压<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tar -xf nginx-1.xx.0.tar.gz</span><br></pre></td></tr></table></figure></li></ol><p>进入解压后文件夹，执行以下命令<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./configure</span><br><span class="line">$ make </span><br><span class="line">$ sudo make install</span><br></pre></td></tr></table></figure></p><p>其中，./configure 用来生成 make 所必须的一些文件。Nginx 安装完成后的目录默认在 /usr/local/nginx 。</p><h2 id="优化-Linux-内核参数"><a href="#优化-Linux-内核参数" class="headerlink" title="优化 Linux 内核参数"></a>优化 Linux 内核参数</h2><p>默认的 Linux　内核参数不符合用于支持高并发访问的 web 服务器的定义，因此需要优化内核参数，需要修改 /etc/sysctl.conf 文件，常用配置如下。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">fs.file-max = 999999             </span><br><span class="line">net.ipv4.tcp_tw_reuse = 1         </span><br><span class="line">net.ipv4.tcp_keepalive_time = 600 </span><br><span class="line">net.ipv4.tcp_fin_timeout 30       </span><br><span class="line">net.ipv4.tcp_max_tw_buckets = 5000          </span><br><span class="line">net.ipv4.ip_local_port_range = 1024  61000  </span><br><span class="line">net.ipv4.tcp_rmem = 4096 32768 262142      </span><br><span class="line">net.ipv4.tcp_wmem = 4096 32768 262142       </span><br><span class="line">net.core.netdev_max_backlog = 8096          </span><br><span class="line">net.core.rmem_default = 262144    </span><br><span class="line">net.core.wmem_default = 262144   </span><br><span class="line">net.core.rmem_max = 2097152       </span><br><span class="line">net.core.wmem_max = 2097152       </span><br><span class="line">net.tcp_syncookies = 1            </span><br><span class="line">net.tcp_max_syn.backlog = 1024</span><br></pre></td></tr></table></figure></p><p>说明如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">fs.file-max = 999999              # 进程可以同时打开的最大句柄数，直接限制最大并发连接数</span><br><span class="line">net.ipv4.tcp_tw_reuse = 1         # １表示允许将　TIME-WAIT 状态的 socket 重新用于新的 TCP 链接</span><br><span class="line">net.ipv4.tcp_keepalive_time = 600 # 启用 keepalive 时，TCP 发送 keepalive 消息的频度</span><br><span class="line">net.ipv4.tcp_fin_timeout 30       # 服务器主动关闭连接时，socket 保持在 FIN-WAIT-2 状态的时间 </span><br><span class="line">net.ipv4.tcp_max_tw_buckets = 5000          # TIME-WAIT 套接字数量的最大值</span><br><span class="line">net.ipv4.ip_local_port_range = 1024  61000  # UDP 和 TCP 连接中本地端口取值范围</span><br><span class="line">net.ipv4.tcp_rmem = 4096 32768 262142       # TCP 接收缓存的最小值，默认值，最大值</span><br><span class="line">net.ipv4.tcp_wmem = 4096 32768 262142       # TCP 发送缓存的最小值，默认值，最大值</span><br><span class="line">net.core.netdev_max_backlog = 8096          # 当网卡接收数据包的速度大于内核处理速度时，会有一个队列保存这些数据包，该参数表示该队列的最大值</span><br><span class="line">net.core.rmem_default = 262144    # 内核套接字接收缓存区默认的大小</span><br><span class="line">net.core.wmem_default = 262144    # 内核套接字发送缓存区默认的大小</span><br><span class="line">net.core.rmem_max = 2097152       # 内核套接字接收缓存区的最大大小</span><br><span class="line">net.core.wmem_max = 2097152       # 内核套接字发送缓存区的最大大小</span><br><span class="line">net.tcp_syncookies = 1            # 该参数与性能无关，用于解决 TCP 的 SYN 攻击 </span><br><span class="line">net.tcp_max_syn.backlog = 1024    # TCP 三次握手接收 SYN 请求队列的最大长度</span><br></pre></td></tr></table></figure></p><p>然后执行 sysctl -p 即可使上述命令生效。</p><p>参考书籍：《深入理解 Nginx：模块开发与架构解析》第二版。</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> CentOS </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Ubuntu 16.04 引导修复（boot-repair）</title>
      <link href="/2018/09/11/Ubuntu%2016.04%20%E5%BC%95%E5%AF%BC%E4%BF%AE%E5%A4%8D%EF%BC%88boot-repair%EF%BC%89/"/>
      <url>/2018/09/11/Ubuntu%2016.04%20%E5%BC%95%E5%AF%BC%E4%BF%AE%E5%A4%8D%EF%BC%88boot-repair%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>原文转载自：<a href="https://blog.csdn.net/laocaibcc229/article/details/79274412" target="_blank" rel="noopener">https://blog.csdn.net/laocaibcc229/article/details/79274412</a></p><h2 id="问题描述："><a href="#问题描述：" class="headerlink" title="问题描述："></a>问题描述：</h2><p>在win10的基础上安装了ubuntu16.04，但是后来重新安装了win10，导致ubuntu的引导消失。查找了多种方法，包括easyBCD，rEFind与bootice等，都没有成功，最终用U盘启动盘进行修复，解决了这个问题。</p><h2 id="解决方案："><a href="#解决方案：" class="headerlink" title="解决方案："></a>解决方案：</h2><p>1.制作一个U盘启动盘。下载对应的ubuntu系统，用UltraISO制作Ubuntu U盘启动。</p><p>2.打开电脑后选择u盘启动盘，然后选择try ubuntu without install。试用不安装。</p><p>3.进入ubuntu系统后，连接好网络，打开终端，输入下面命令，按照提示操作。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:yannubuntu/boot-repair &amp;&amp; sudo apt-get update</span><br></pre></td></tr></table></figure></p><p>4.完成后，终端中输入下面命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y boot-repair &amp;&amp; boot-repair</span><br></pre></td></tr></table></figure></p><p>会出现如下界面，选择recommended repair</p><p><img src="./images/boot-repair-1.png" alt="boot-repair-1"></p><p>5.按照boot repair提示的操作进行，完成后重启电脑即可完成。</p>]]></content>
      
      
      <categories>
          
          <category> 折腾 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 转载 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>加权法排序二值序列所记录的对象集</title>
      <link href="/2018/09/08/%E5%8A%A0%E6%9D%83%E6%B3%95%E6%8E%92%E5%BA%8F%E4%BA%8C%E5%80%BC%E5%BA%8F%E5%88%97%E6%89%80%E8%AE%B0%E5%BD%95%E7%9A%84%E5%AF%B9%E8%B1%A1%E9%9B%86/"/>
      <url>/2018/09/08/%E5%8A%A0%E6%9D%83%E6%B3%95%E6%8E%92%E5%BA%8F%E4%BA%8C%E5%80%BC%E5%BA%8F%E5%88%97%E6%89%80%E8%AE%B0%E5%BD%95%E7%9A%84%E5%AF%B9%E8%B1%A1%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>给定一串 6 位 0-1 序列， 如 ‘111111’，该序列记录着集合内 A, B, C, D 四个元素的大小。其中每一个比特的含义如下：</p><p>第 1 位，表示 A 与 B 的大小关系，为 0 表示 A&lt;B， 为 1 表示 A&gt;B;</p><p>第 2 位，表示 B 与 C 的大小关系，为 0 表示 B&lt;C， 为 1 表示 B&gt;C;</p><p>第 3 位，表示 C 与 D 的大小关系，为 0 表示 C&lt;D， 为 1 表示 C&gt;D;</p><p>第 4 位，表示 A 与 C 的大小关系，为 0 表示 A&lt;C， 为 1 表示 A&gt;C;</p><p>第 5 位，表示 B 与 D 的大小关系，为 0 表示 B&lt;D， 为 1 表示 B&gt;D;</p><p>第 6 位，表示 A 与 D 的大小关系，为 0 表示 A&lt;D， 为 1 表示 A&gt;D;</p><p>根据给定的 0-1 序列，将 A, B, C, D 四个对象按升序排列。</p><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>可以使用加权法，四个对象的初始权重都赋值为 0，依次判断序列中的每一位值，根据值来给相应的较大对象加权。例如，对于序列 ‘111111’，第 1 位为 1，则对象 B 权重加 1，第 2 位为 1， 则对象 C 权重加 1；以此类推；最后对象 A, B, C, D 的权重分别为 0, 1, 2, 3 ， 根据这个权重就可以给四个对象排序了！</p><h2 id="代码如下"><a href="#代码如下" class="headerlink" title="代码如下"></a>代码如下</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> tags[<span class="number">6</span>][<span class="number">2</span>] = &#123;</span><br><span class="line">&#123; <span class="number">0</span>, <span class="number">1</span> &#125;,</span><br><span class="line">&#123; <span class="number">1</span>, <span class="number">2</span> &#125;,</span><br><span class="line">&#123; <span class="number">2</span>, <span class="number">3</span> &#125;,</span><br><span class="line">&#123; <span class="number">0</span>, <span class="number">2</span> &#125;,</span><br><span class="line">&#123; <span class="number">1</span>, <span class="number">3</span> &#125;,</span><br><span class="line">&#123; <span class="number">0</span>, <span class="number">3</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">char</span>* <span class="title">sort</span><span class="params">(<span class="keyword">char</span> *series, <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">char</span> *data; <span class="comment">// tmpser 用来记录 A,B,C,D 四个对象的权重，初始权重都为 0</span></span><br><span class="line"><span class="keyword">char</span> tmpser[<span class="number">4</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;len; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(series[i] == <span class="number">0</span>)</span><br><span class="line">tmpser[tags[i][<span class="number">1</span>]]++;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">tmpser[tags[i][<span class="number">0</span>]]++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data = (<span class="keyword">char</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">char</span>)*<span class="number">4</span>);</span><br><span class="line">data[tmpser[<span class="number">0</span>]] = <span class="string">'A'</span>;</span><br><span class="line">data[tmpser[<span class="number">1</span>]] = <span class="string">'B'</span>;</span><br><span class="line">data[tmpser[<span class="number">2</span>]] = <span class="string">'C'</span>;</span><br><span class="line">data[tmpser[<span class="number">3</span>]] = <span class="string">'D'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">char</span> series[<span class="number">6</span>] = &#123; <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span> ,<span class="number">1</span> ,<span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">char</span> *data, i;</span><br><span class="line">data = sort(series, <span class="number">6</span>);</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%c "</span>,data[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果如下：</p><p>D C B A</p>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 排序算法 </tag>
            
            <tag> 加权法 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Nginx + Yii2 配置</title>
      <link href="/2018/07/20/Nginx%20+%20Yii2%20%E9%85%8D%E7%BD%AE/"/>
      <url>/2018/07/20/Nginx%20+%20Yii2%20%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>之前写的一个 yii2 应用一直跑在 apache2 上，最近做压测发现 apache2 的并发处理能力的确差了点，于是想到将应用转移到 nginx 上，以下记录整个迁移过程。</p><h2 id="安装-nginx"><a href="#安装-nginx" class="headerlink" title="安装 nginx"></a>安装 nginx</h2><p>由于本人用的是 ubuntu16.04 ，只要使用以下命令就能快速安装 nginx 了。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nginx -y</span><br></pre></td></tr></table></figure></p><p>由于之前本机安装了 apache2，如果在安装的时候报了一大堆错误，那么很有可能是在运行的 apache2 影响到了安装过程，此时需要先停止 apache2 ，可通过以下命令。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service apache2 stop</span><br></pre></td></tr></table></figure></p><p>nginx 成功安装后，相关的配置目录在 /etc/nginx 。可以通过以下命令来启动 nginx<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/nginx start</span><br></pre></td></tr></table></figure></p><p>此时访问本地 80 端口即可看到 nginx 欢迎页面。</p><h2 id="php7-0-fpm-与-nginx"><a href="#php7-0-fpm-与-nginx" class="headerlink" title="php7.0-fpm 与 nginx"></a>php7.0-fpm 与 nginx</h2><p>nginx 与 php-fpm 通信有两种方式，一种是通过 TCP，另外一种是 unix socket 。据说两者在一般情况下没有太大差异，但是在高并发情况下，unix socket 方式性能要优异一些。修改/etc/php/7.0/pool.d/<a href="http://www.conf" target="_blank" rel="noopener">www.conf</a> 相应内容如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">listen = /run/php/php7.0-fpm.sock</span><br></pre></td></tr></table></figure></p><p>因此，在 nginx 的配置文件中就必须要使用相应的方式，配置如下<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line"><span class="attribute">listen</span> <span class="number">886</span> default_server;</span><br><span class="line"><span class="attribute">listen</span> [::]:<span class="number">886</span> default_server;</span><br><span class="line"></span><br><span class="line"><span class="attribute">root</span> /Myweb/yii2/web;</span><br><span class="line"><span class="attribute">index</span> index.php index.html index.htm index.nginx-debian.html;</span><br><span class="line"></span><br><span class="line"><span class="comment"># rewrite route</span></span><br><span class="line"><span class="attribute">if</span> (!-e <span class="variable">$request_filename</span>)&#123;</span><br><span class="line">   <span class="attribute">rewrite</span><span class="regexp"> ^/(.*)</span> /index.php <span class="literal">last</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="attribute">server_name</span> _;</span><br><span class="line"></span><br><span class="line"><span class="attribute">location</span> / &#123;</span><br><span class="line"><span class="comment"># First attempt to serve request as file, then</span></span><br><span class="line"><span class="comment"># as directory, then fall back to displaying a 404.</span></span><br><span class="line"><span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ =<span class="number">404</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attribute">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line"><span class="comment"># include snippets/fastcgi-php.conf;</span></span><br><span class="line"><span class="attribute">fastcgi_pass</span> unix:/run/php/php7.0-fpm.sock;</span><br><span class="line">        <span class="attribute">include</span> fastcgi.conf;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>以上配置，监听 886 端口，服务器根目录为 /Myweb/yii2/web ，对应 yii2 的入口。 fastcgi_pass unix: /run/php/php7.0-fpm.sock 表示使用 unix socket 方式与 php-fpm 通信。 include 的根目录为 /etc/nginx/。</p><h2 id="开启-nginx-的路由重写"><a href="#开启-nginx-的路由重写" class="headerlink" title="开启 nginx 的路由重写"></a>开启 nginx 的路由重写</h2><p>以上配置文件中，如下几行起到了开启路由重写的作用。之前看到很多博文说要另写文件去开启路由重写，后来才发现只要在 sever 配置内写入重写规则即可，没必要另外再新建重写文件。<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">if</span> (!-e <span class="variable">$request_filename</span>)&#123;</span><br><span class="line">   <span class="attribute">rewrite</span><span class="regexp"> ^/(.*)</span> /index.php <span class="literal">last</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>  rewrite 是路由重写的指令，根据正则表达式的内容，重定向到replacement，结尾是flag标记。</p><p> rewrite    <regex>    <replacement>    [flag];</replacement></regex></p><p> 关键字      正则        替代内容          flag标记</p><p>具体的可参考其他博客。</p><p>参考链接：</p><p><a href="https://hideonbushtut.github.io/2017/01/27/%E6%80%BB%E7%BB%93Ubuntu%E4%B8%8B%E9%83%A8%E7%BD%B2LNMP%E7%8E%AF%E5%A2%83/" target="_blank" rel="noopener">总结Ubuntu下部署LNMP环境</a></p><p><a href="https://www.cnblogs.com/quwaner/p/8193186.html" target="_blank" rel="noopener">Nginx URL重写（rewrite）配置及信息详解</a></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> Yii2 </tag>
            
            <tag> Nginx路由重写 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>批量 ab 测试</title>
      <link href="/2018/07/19/%E6%89%B9%E9%87%8F%20ab%20%E6%B5%8B%E8%AF%95/"/>
      <url>/2018/07/19/%E6%89%B9%E9%87%8F%20ab%20%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<p>最近在做服务器压测，想到可以通过 shell 脚本调用压测工具 ab 来进行多次测试。大致的想法是：</p><ol><li>通过 shell 脚本循环调用 ab 压测工具得到多次压测日志，并分类保存；</li><li>通过 shell 脚本循环调用 awk 工具将每个日志中的 90% 时间提取出来。</li></ol><h2 id="ab-工具"><a href="#ab-工具" class="headerlink" title="ab 工具"></a>ab 工具</h2><p>ab是apache自带的一个很好用的压力测试工具，当安装完apache的时候，就可以在bin下面找到ab。一个简单的 demo 如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ab -c 10 -n 100 -H <span class="string">"Authorization:Bearer nAuhWwS6xea7BcyCfVy5VoKF7MsAHDTtX7ABzN"</span> http://domain/path</span><br></pre></td></tr></table></figure></p><p>其中 -c 代表并发数，-n 代表请求数，-H 要发送的 Header。返回结果示例及各参数意义如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">This is ApacheBench, Version 2.3 &lt;$Revision: 1706008 $&gt;</span><br><span class="line">Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/</span><br><span class="line">Licensed to The Apache Software Foundation, http://www.apache.org/</span><br><span class="line"></span><br><span class="line">Benchmarking 101.132.123.35 (be patient).....done</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Server Software:        Apache/2.4.18 # 服务器类型及其版本</span><br><span class="line">Server Hostname:        &lt;Hostname&gt; # 请求的主机名</span><br><span class="line">Server Port:            84 # 端口号</span><br><span class="line"></span><br><span class="line">Document Path:          /v1/door/helps # 请求的路径</span><br><span class="line">Document Length:        1143 bytes # 返回数据的大小</span><br><span class="line"></span><br><span class="line">Concurrency Level:      10 # 并发规模</span><br><span class="line">Time taken for tests:   0.934 seconds # 总请求时间</span><br><span class="line">Complete requests:      100  # 完成的请求数</span><br><span class="line">Failed requests:        0 # 失败的请求数</span><br><span class="line">Total transferred:      131900 bytes # 总共传输的字节数</span><br><span class="line">HTML transferred:       114300 bytes # 总 html 字节数</span><br><span class="line">Requests per second:    107.04 [#/sec] (mean) # 吞吐量</span><br><span class="line">Time per request:       93.427 [ms] (mean) # 用户平均等待时间</span><br><span class="line">Time per request:       9.343 [ms] (mean, across all concurrent requests) # 服务器平均处理时间，即吞吐量倒数</span><br><span class="line">Transfer rate:          137.87 [Kbytes/sec] received # 每秒获取的数据长度</span><br><span class="line"></span><br><span class="line">Connection Times (ms)</span><br><span class="line">              min  mean[+/-sd] median   max</span><br><span class="line">Connect:        7    9   1.2      9      13</span><br><span class="line">Processing:    57   83   9.0     83     119</span><br><span class="line">Waiting:       57   83   9.0     83     119</span><br><span class="line">Total:         67   93   9.4     92     128</span><br><span class="line"></span><br><span class="line">Percentage of the requests served within a certain time (ms)</span><br><span class="line">  50%     92</span><br><span class="line">  66%     95</span><br><span class="line">  75%     96</span><br><span class="line">  80%     99</span><br><span class="line">  90%    105  # 90%的请求在105ms内</span><br><span class="line">  95%    112</span><br><span class="line">  98%    119</span><br><span class="line">  99%    128</span><br><span class="line"> 100%    128 (longest request)</span><br></pre></td></tr></table></figure></p><h2 id="shell-脚本多次测试"><a href="#shell-脚本多次测试" class="headerlink" title="shell 脚本多次测试"></a>shell 脚本多次测试</h2><p>一个可多次进行压测的 demo 如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">urlIndex=<span class="string">"http://Hostname/v1/door/helps"</span></span><br><span class="line">Header=<span class="string">"Authorization:Bearer nAuhTiWwS6xea7BcyCfVy5VoKF7MsAHDTtX7ABzN"</span> <span class="comment"># Header</span></span><br><span class="line"><span class="built_in">declare</span> -A concurrent</span><br><span class="line">concurrent=([<span class="string">'c'</span>]=0 [<span class="string">'n'</span>]=100)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;0..9&#125;;</span><br><span class="line"><span class="keyword">do</span> </span><br><span class="line">    <span class="built_in">let</span> concurrent[<span class="string">'c'</span>]+=10; <span class="comment"># shell数值运算</span></span><br><span class="line">    dirName=tests/Getdb/c<span class="variable">$&#123;concurrent['c']&#125;</span>n<span class="variable">$&#123;concurrent['n']&#125;</span>;</span><br><span class="line">    mkdir -p <span class="variable">$dirName</span>;</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> &#123;0..9&#125;;</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        outFile=<span class="variable">$&#123;dirName&#125;</span>/<span class="string">"time"</span><span class="variable">$j</span>; </span><br><span class="line">        ab -c <span class="variable">$&#123;concurrent['c']&#125;</span> -n <span class="variable">$&#123;concurrent['n']&#125;</span> -H <span class="string">"<span class="variable">$&#123;Header&#125;</span>"</span>  -e <span class="variable">$&#123;outFile&#125;</span> <span class="variable">$&#123;urlIndex&#125;</span>;</span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p><p>要注意的是 shell 进行数值运算时不能对数字直接操作，需要使用 let 命令或者  [] 和 (())  操作符。然后在 mkdir 的时候，最好带上 -p 参数，免得报错。 然后 -H 参数后面带字符串，需要用双引号包起来。</p><h2 id="shell-脚本后处理输出日志"><a href="#shell-脚本后处理输出日志" class="headerlink" title="shell 脚本后处理输出日志"></a>shell 脚本后处理输出日志</h2><p>得到的日志目录如下所示<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">+-- tests</span><br><span class="line">    +-- Get</span><br><span class="line">        +-- c10n100</span><br><span class="line">      |+-- time0</span><br><span class="line">      |+-- time1</span><br><span class="line">      |+-- time2</span><br><span class="line">      |+-- time3</span><br><span class="line">      |+-- time4</span><br><span class="line">      |+-- time5</span><br><span class="line">      |+-- time6</span><br><span class="line">      |+-- time7</span><br><span class="line">      |+-- time8</span><br><span class="line">      |+-- time9</span><br><span class="line">    +-- c20n100</span><br><span class="line">    +-- c30n100</span><br></pre></td></tr></table></figure></p><p>一个个查看日志文件中 90% 用时会显得比较麻烦，于是想到可以用 shell 脚本调用 awk 工具， demo 如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">declare</span> -A concurrent</span><br><span class="line">concurrent=([<span class="string">'c'</span>]=0 [<span class="string">'n'</span>]=100)</span><br><span class="line">fileName=<span class="string">"file.txt"</span> <span class="comment"># 输出文件名</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;0..9&#125;;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">let</span> concurrent[<span class="string">'c'</span>]+=10;</span><br><span class="line">    dirName=tests/Get/c<span class="variable">$&#123;concurrent['c']&#125;</span>n<span class="variable">$&#123;concurrent['n']&#125;</span> <span class="comment"># 取日志文件</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;dirName&#125;</span> &gt;&gt; <span class="variable">$fileName</span> <span class="comment"># 输出测试条件，一行</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> &#123;0..9&#125;;</span><br><span class="line">    <span class="keyword">do</span>  </span><br><span class="line">        dataFile=<span class="variable">$&#123;dirName&#125;</span>/<span class="string">"time"</span><span class="variable">$j</span>;</span><br><span class="line">        awk <span class="string">'/^90/&#123;print&#125;'</span> <span class="variable">$&#123;dataFile&#125;</span> &gt;&gt; <span class="variable">$fileName</span> <span class="comment"># 将 awk 输出的信息重定向到 file.txt 中</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p><p>awk 的一般使用方法如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'RegexPattern&#123;command&#125;'</span> srcFile</span><br></pre></td></tr></table></figure></p><p>‘ ‘ 内表示正则表达式+命令，如以下命令找出文件 time0 中以 “9”开头的行，并且输出到 file.txt 文件中。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'/^90/&#123;print&#125;'</span> time0 &gt;&gt; file.txt</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ab </tag>
            
            <tag> 服务器压测 </tag>
            
            <tag> shell </tag>
            
            <tag> awk </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>查找32位无符号整形数中1的个数</title>
      <link href="/2018/03/05/%E6%9F%A5%E6%89%BE32%E4%BD%8D%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B4%E5%BD%A2%E6%95%B0%E4%B8%AD1%E7%9A%84%E4%B8%AA%E6%95%B0/"/>
      <url>/2018/03/05/%E6%9F%A5%E6%89%BE32%E4%BD%8D%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B4%E5%BD%A2%E6%95%B0%E4%B8%AD1%E7%9A%84%E4%B8%AA%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="代码如下"><a href="#代码如下" class="headerlink" title="代码如下"></a>代码如下</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">uint32_t</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">uint32_t</span> n;</span><br><span class="line"><span class="keyword">for</span>(n=<span class="number">0</span>; x; n++)&#123;</span><br><span class="line">x &amp;= x<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>一种远程部署项目的方案</title>
      <link href="/2017/11/08/%E4%B8%80%E7%A7%8D%E8%BF%9C%E7%A8%8B%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%96%B9%E6%A1%88/"/>
      <url>/2017/11/08/%E4%B8%80%E7%A7%8D%E8%BF%9C%E7%A8%8B%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<h2 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h2><ul><li>一台本地主机和一台远程aliyun主机</li><li>两个主机都装有 ssh, git</li><li>确保阿里云防火墙开放了ssh端口,一般端口号是22</li></ul><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>远程主机aliyun新建用户并赋予root权限</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ adduser git   #新建用户git</span><br><span class="line">$ vim /etc/sudoers #修改此文件，新增一行 git ALL=(ALL:ALL) ALL</span><br><span class="line">$ su git #切换至用户git</span><br><span class="line">$ sudo mkdir /opt/git-repo #此目录用于存放git项目，进行版本管理</span><br><span class="line">$ sudo chown git:git -R /opt/git-repo #将git-repo所有者赋予git</span><br></pre></td></tr></table></figure><p>本地主机新建git仓库，并推送至远程主机</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git clone --bare my-project my-project.git</span><br><span class="line">$ scp -r my-project.git git@www.server.com:/opt/git-repo #一定要确保远程主机上的用户git对git-repo文件夹有绝对的操作权限</span><br><span class="line">$ cd my-project</span><br><span class="line">$ git remote add aliyun git@www.server.com:/opt/git-repo/my-project</span><br></pre></td></tr></table></figure><p>至此，本地主机就可以用名为aliyun的远程主机上的my-project仓库进行版本管理了。而且，远程主机本地进行项目同步，见如下命令:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd my-project</span><br><span class="line">$ git remote add local /opt/git-repo/my-project</span><br><span class="line">$ git pull local master</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这种远程部署方法简单，安全而且高效，比较适合中小型项目的远程部署。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://git-scm.com/book/zh/v2/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git-%E5%8D%8F%E8%AE%AE" target="_blank" rel="noopener">pro-git</a></p>]]></content>
      
      
      <categories>
          
          <category> 折腾 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>初探pagodabox</title>
      <link href="/2017/07/08/%E5%88%9D%E6%8E%A2pagodabox/"/>
      <url>/2017/07/08/%E5%88%9D%E6%8E%A2pagodabox/</url>
      
        <content type="html"><![CDATA[<h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h2><p>这几天在学习<a href="https://phptherightway.golaravel.com" target="_blank" rel="noopener">PHP编程之道</a>的时候，偶然发现了Paas这一神奇的东东。Paas(Platform as a Service)，提供了运行PHP应用程序所必须的系统环境和网络架构，这意味着只需要做少量配置就可以运行PHP应用程序或者PHP框架。在众多的<a href="https://phptherightway.golaravel.com/#php_paas_providers" target="_blank" rel="noopener">Paas提供商</a>中，试过PagodaBox，AppFog，Heroku和OpenShift，最后发现PagodaBox才是最适合用来捣鼓个人PHP应用。注册PagodaBox后，即可最多建立三个免费应用，每个应用的代码服务主机(Code Services)的配置是单核CPU，128MB的RAM和4GB的DISK；每个应用可以建立多个存储主机和数据库主机。详细信息参看<a href="https://pagodabox.io/" target="_blank" rel="noopener">Pagoda Box官网</a>。</p><h2 id="2-管理应用代码-Code-和数据-Data"><a href="#2-管理应用代码-Code-和数据-Data" class="headerlink" title="2. 管理应用代码(Code)和数据(Data)"></a>2. 管理应用代码(Code)和数据(Data)</h2><p>总的来说，管理一个Pagoda Box应用主要是管理它的代码和数据。管理代码是通过Git操作来实现的，管理数据的方式则比较多样，可以通过代码服务主机间接控制数据库主机，也可以通过SSH方式远程控制数据库主机。</p><h3 id="2-1-管理代码-Code"><a href="#2-1-管理代码-Code" class="headerlink" title="2.1 管理代码(Code)"></a>2.1 管理代码(Code)</h3><p>首次提交，需初始化Git<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /your/application/dir</span><br><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -m "What you want to express"</span><br><span class="line">git remote add pagoda git@git.pagodabox.io:apps/drelang.git</span><br><span class="line">git push pagoda master</span><br></pre></td></tr></table></figure></p><p>初次建立SSH连接，需要进行一些配置。首先要在本地生成SSH密匙，密匙在”~/.ssh/“目录下，若有密匙则不需要再另外生成密匙。这个SSH密匙可以用来建立任何SSH链接，也就是说可以链接非Pagoda Box的主机，这个涉及到SSH连接，可以查看相关资料。然后讲密匙目录下的共匙”id_rad.pub”里面的内容复制到Pagoda Box个人账户中的SSH管理项内，之后就可以建立起本地与远程主机的SSH服务了。<br>之后提交代码只需下面那些操作<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /your/application/dir</span><br><span class="line">git add .</span><br><span class="line">git commit -m "What you want to express"</span><br><span class="line">git push pagoda master</span><br></pre></td></tr></table></figure></p><p>每次提交，远程代码服务主机都会重新配置环境，这个就导致代码部署效率底下，想找到一种只提交代码而不需要远程代码服务主机重新配置环境的方法。</p><h3 id="2-2-管理数据-Data"><a href="#2-2-管理数据-Data" class="headerlink" title="2.2 管理数据(Data)"></a>2.2 管理数据(Data)</h3><p>数据有MySQL，MariaDB，PostgreSQL，MongoDB，Redis和Memcached等，目前只管理过MySQL。管理方式有通过代码服务主机间接控制数据库主机和通过SSH方式远程直接控制数据库主机。这两种方式都需要在应用控制面板(DashBoard)上开启SSH方式。</p><h4 id="2-2-1通过代码服务主机-Interacting-with-Code-Servers"><a href="#2-2-1通过代码服务主机-Interacting-with-Code-Servers" class="headerlink" title="2.2.1通过代码服务主机(Interacting with Code Servers)"></a>2.2.1通过代码服务主机(Interacting with Code Servers)</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh gopagoda@75.126.154.152 -p 2541</span><br><span class="line">mysql -h $DATABASE1_HOST -P $DATABASE1_PORT -u $DATABASE1_USER -p$DATABASE1_PASS $DATABASE1_NAME</span><br></pre></td></tr></table></figure><p>第一行代码参看自己Code Servers的SSH框中的Raw SSH Credentials面板。第二行代码是万能代码，拿去直接用就行，因为那些全局变量在应用生成的时候就随之生成了，每个用户的每个应用的全局变量内容都不一样。</p><h4 id="2-2-2通过SSH端口直连"><a href="#2-2-2通过SSH端口直连" class="headerlink" title="2.2.2通过SSH端口直连"></a>2.2.2通过SSH端口直连</h4><p>在DashBoard的Data框的SSH框的Raw SSH Credentials面板下可以看到连接代码<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh gopagoda@75.126.154.152 -p 2477 -N -L :3306:192.168.0.2:3306</span><br></pre></td></tr></table></figure></p><p>很不凑巧，这种方式在我电脑上行不通。于是乎，我就用Dbeaver这个工具来实现本地管理远程数据库。<br>为了使用这个工具，需要进行一定的配置。</p><h5 id="2-2-2-1安装JAVA环境"><a href="#2-2-2-1安装JAVA环境" class="headerlink" title="2.2.2.1安装JAVA环境"></a>2.2.2.1安装JAVA环境</h5><p>我使用的方式是先在<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">JAVA官网</a>下载相应的JDK，然后解压到/usr/jdk文件夹下，然后打开/etc/profile文件来配置环境变量。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/jdk/jdk1.8.0_101</span><br><span class="line">export JRE_HOME=$JAVA_HOME/jre</span><br><span class="line">export CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib:$JRE_HOME/lib</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin</span><br></pre></td></tr></table></figure></p><p>第一行的路径是存放解压后文件夹的路径。修改好profile文件后，使用SUPER用户运行sourc /etc/profile命令，之后启动Dbeaver也是在超级用户模式下。在命令行运行java和javac看JAVA环境是否配置好。</p><h5 id="2-2-2-2安装Dbeaver"><a href="#2-2-2-2安装Dbeaver" class="headerlink" title="2.2.2.2安装Dbeaver"></a>2.2.2.2安装Dbeaver</h5><p>到<a href="http://dbeaver.jkiss.org/download/" target="_blank" rel="noopener">Dbeaver官网</a>下载对应版本，然后解压。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su</span><br><span class="line">cd /dbeaver</span><br><span class="line">./dbeaver</span><br></pre></td></tr></table></figure></p><h5 id="2-2-2-3使用Dbeaver"><a href="#2-2-2-3使用Dbeaver" class="headerlink" title="2.2.2.3使用Dbeaver"></a>2.2.2.3使用Dbeaver</h5><p>进入Dbeaver后，新建连接<img src="/images/create new connection.png" alt>。一些必要信息都可以在DashBoard上查找得到。一个需要注意的地方时，需要把SSH私匙复制到/Dbeaver/SSH文件夹下，若没有，需要新建.见下图，<img src="/images/ssh.png" alt>然后给连接设置一个密码(specify password).</p><h2 id="3-结尾"><a href="#3-结尾" class="headerlink" title="3. 结尾"></a>3. 结尾</h2><p>小结一下本文。<br>1.建立Pagoda Box账户，并免费创建个人PHP应用<br>2.通过Git管理Code Servers<br>3.通过Dbeaver管理Data</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pagodabox </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>用pyinstaller打包PyQt5程序</title>
      <link href="/2017/05/18/%E7%94%A8pyinstall%E6%89%93%E5%8C%85PyQt5%E7%A8%8B%E5%BA%8F/"/>
      <url>/2017/05/18/%E7%94%A8pyinstall%E6%89%93%E5%8C%85PyQt5%E7%A8%8B%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="安装pyinstaller"><a href="#安装pyinstaller" class="headerlink" title="安装pyinstaller"></a>安装pyinstaller</h2><p>Windows环境下使用CMD，运行如下命令<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install pyinstaller</span><br></pre></td></tr></table></figure></p><p>比较高版本的pyinstaller安装时会自动安装32位的依赖。</p><h2 id="使用pyinstaller"><a href="#使用pyinstaller" class="headerlink" title="使用pyinstaller"></a>使用pyinstaller</h2><p>定位到程序的主入口目录，使用以下命令生成EXE文件。<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyinstaller -F -w -i d:\tmp\main.ico main.py</span><br></pre></td></tr></table></figure></p><p>若提示“failed to execute script pyi_rth_qt5plugins”，则需要制定包路径<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pyinstaller -F -w -i .\main.ico -p d:\python35\Lib\site-packages\PyQt5\Qt\bin main.py</span><br><span class="line">### 参数说明</span><br><span class="line">-F 表示生成单个可执行文件</span><br><span class="line">-w 表示去掉控制台窗口，这在GUI界面时非常有用。不过如果是命令行程序的话那就把这个选项删除吧！</span><br><span class="line">-p 表示你自己自定义需要加载的类路径，一般情况下用不到</span><br><span class="line">-i 表示可执行文件的图标</span><br><span class="line">## 加载资源文件</span><br><span class="line">如果程序中使用到了图片，视频等文件，则应该使用pyrcc生成资源文件。</span><br><span class="line">首先，新建一个.qrc文件，以下文件命名为images.qrc，内容格式如下：</span><br></pre></td></tr></table></figure></p><p><rcc><br>  <qresource prefix="/"><br>​    <file>img/image1.png</file><br>​    <file>img/image2.png</file><br>​    <file>img/image3.png</file><br>  </qresource><br></rcc><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&apos;img&apos;是存放图片的文件夹，用的是相对路径。</span><br><span class="line">然后去存放文件的目录下，执行以下命令</span><br><span class="line">​```cmd</span><br><span class="line">pyrcc5 -o images_qr.py images.qrc</span><br></pre></td></tr></table></figure></p><p>image_qr.py是生成的python文件。<br>在要使用图片资源的Python文件里，要使用以下代码引用：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> images_qr<span class="comment">#假设images_qr.py文件与主python文件同目录</span></span><br><span class="line">self.setWindowIcon(QtGui.QIcon(<span class="string">':/img/image1.png'</span>))<span class="comment">#修改图片路径，一定要在路径前面加上冒号</span></span><br></pre></td></tr></table></figure></p><p>参考用 <a href="http://www.jianshu.com/p/c1e75244b6f3" target="_blank" rel="noopener">PyInstaller 打包基于 PyQt 的程序遇到的坑</a>,<a href="http://www.cnblogs.com/dacainiao/p/5918845.html" target="_blank" rel="noopener">使用PyInstaller打包Python程序</a></p>]]></content>
      
      
      <categories>
          
          <category> Python3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PyQt5 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Python3 tkinter 使用时遇到的困难</title>
      <link href="/2017/04/05/Python3%20tkinter%20%E4%BD%BF%E7%94%A8%E6%97%B6%E9%81%87%E5%88%B0%E7%9A%84%E5%9B%B0%E9%9A%BE/"/>
      <url>/2017/04/05/Python3%20tkinter%20%E4%BD%BF%E7%94%A8%E6%97%B6%E9%81%87%E5%88%B0%E7%9A%84%E5%9B%B0%E9%9A%BE/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>花了几天，基于python3的pyserial和tkinter库写了一个简陋的串口上位机软件。有些widgets看起来用的很方便，实际用的时候有很多要注意的地方，以下总结了几点。</p><h2 id="小麻烦"><a href="#小麻烦" class="headerlink" title="小麻烦"></a>小麻烦</h2><h3 id="Linux和Windows在细节上的区别"><a href="#Linux和Windows在细节上的区别" class="headerlink" title="Linux和Windows在细节上的区别"></a>Linux和Windows在细节上的区别</h3><h4 id="表示路径的差异"><a href="#表示路径的差异" class="headerlink" title="表示路径的差异"></a>表示路径的差异</h4><table><thead><tr><th></th><th>Linux</th><th>Windows</th></tr></thead><tbody><tr><td>相对路径</td><td>./images/serial.png</td><td>.\images\serial.png</td></tr><tr><td>绝对路径</td><td>/home/images/serial.png</td><td>C:\images\serial.png</td></tr></tbody></table><h4 id="串口地址不同"><a href="#串口地址不同" class="headerlink" title="串口地址不同"></a>串口地址不同</h4><p>Linux下，串口地址一般是”/dev/ttyUSB0”，而Windows下，串口地址一般是”COM1”，在使用时要注意区别。以下代码，先判断系统类型，然后执行相应的打开串口操作。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plat = platform.system()</span><br><span class="line"><span class="keyword">if</span> plat == <span class="string">"Linux"</span>:</span><br><span class="line">    port = <span class="string">'/dev/ttyUSB0'</span></span><br><span class="line"><span class="keyword">elif</span> plat == <span class="string">"Windows"</span>:</span><br><span class="line">    port = <span class="string">"COM3"</span></span><br><span class="line">ser = serial.Serial(port)</span><br></pre></td></tr></table></figure></p><h4 id="更改GUI窗口图标方法不一样"><a href="#更改GUI窗口图标方法不一样" class="headerlink" title="更改GUI窗口图标方法不一样"></a>更改GUI窗口图标方法不一样</h4><p>Windows下，直接用一行代码就行，而Linux下，则需要对图片文件进行一定的处理后，才能完成更换默认图标的功能。以下代码，判断系统类型后，进行相关操作。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> platform.system() == <span class="string">"Windows"</span>:</span><br><span class="line">    root.iconbitmap(<span class="string">'.\images\serial_port.ico'</span>)</span><br><span class="line"><span class="keyword">elif</span> platform.system() == <span class="string">"Linux"</span>:</span><br><span class="line">    img = Image(<span class="string">"photo"</span>,file=<span class="string">"./images/serial_port.png"</span>)</span><br><span class="line">    root.tk.call(<span class="string">'wm'</span>,<span class="string">'iconphoto'</span>,root._w,img)</span><br></pre></td></tr></table></figure></p><h3 id="上位机与下位机之间的数据传输"><a href="#上位机与下位机之间的数据传输" class="headerlink" title="上位机与下位机之间的数据传输"></a>上位机与下位机之间的数据传输</h3><p>下位机通过串口只能接收类型为字节(Byte)的数据，而用python的open()函数打开文件后，得到的是文件(file)对象，对文件对象进行read()方法后，可以得到文件中的字符串(String)，字符串是不能直接传递给下位机的，必须经过处理，将字符串(Strings)转换成字节串(Bytes).python中的数据类型转换见之前的博客<a href="http://drelang.cn/2017/03/07/bytes,strings%20and%20int%20in%20Python/" target="_blank" rel="noopener">bytes,strings,decimal and hex in Python3</a></p><h3 id="tkinter中的Text-控件与Scrollbar-控件配合"><a href="#tkinter中的Text-控件与Scrollbar-控件配合" class="headerlink" title="tkinter中的Text()控件与Scrollbar()控件配合"></a>tkinter中的Text()控件与Scrollbar()控件配合</h3><p>为了实现拖动滚动条让文本框中的内容随之滚动，必须要将Text()和Scrollbar()配合起来，见下例.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> *</span><br><span class="line">root = Tk()</span><br><span class="line">text = Text(root)</span><br><span class="line">text.pack(side=LEFT)</span><br><span class="line">scroll = Scrollbar(root)</span><br><span class="line">scroll.pack(side=RIGHT)</span><br><span class="line">text.config(yscrollcommand=scroll.set)</span><br><span class="line">scroll.config(command=text.yview)</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> Python3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tkinter </tag>
            
            <tag> pyserial </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Bytes,strings,decimal and hex in Python3</title>
      <link href="/2017/03/07/bytes,strings%20and%20int%20in%20Python/"/>
      <url>/2017/03/07/bytes,strings%20and%20int%20in%20Python/</url>
      
        <content type="html"><![CDATA[<p>python中字节，字符和整数之间的转换</p><h2 id="decimal-and-hex"><a href="#decimal-and-hex" class="headerlink" title="decimal and hex"></a>decimal and hex</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#decimal to hex</span></span><br><span class="line">hex(<span class="number">16</span>) <span class="comment">#==&gt;0x10</span></span><br><span class="line"><span class="comment">#hex to decimal</span></span><br><span class="line">int(<span class="string">'0x10'</span>,<span class="number">16</span>) <span class="comment">#==&gt;16</span></span><br></pre></td></tr></table></figure><h2 id="strings-to-int"><a href="#strings-to-int" class="headerlink" title="strings to int"></a>strings to int</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#string to decimal</span></span><br><span class="line">int(<span class="string">'10'</span>) <span class="comment">#==&gt;10</span></span><br><span class="line"><span class="comment">#string to hex</span></span><br><span class="line">int(<span class="string">'10'</span>,<span class="number">16</span>) <span class="comment">#==&gt;16</span></span><br><span class="line"><span class="comment">#hexic string to hex</span></span><br><span class="line">int(<span class="string">'0x10'</span>,<span class="number">16</span>) <span class="comment">#==&gt;16</span></span><br></pre></td></tr></table></figure><h2 id="bytes-to-int"><a href="#bytes-to-int" class="headerlink" title="bytes to int"></a>bytes to int</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#to int (one byte)</span></span><br><span class="line">struct.unpack(<span class="string">'B'</span>,bytes(<span class="string">b'\x01'</span>)) <span class="comment">#==&gt;(1,)  a tuple</span></span><br><span class="line"><span class="comment">#to long int (four bytes)</span></span><br><span class="line">struct.unpack(<span class="string">'&lt;L'</span>,bytes(<span class="string">b'\x01\x00\x00\x00'</span>)) <span class="comment">#==&gt;(1,)</span></span><br></pre></td></tr></table></figure><h2 id="int-to-bytes"><a href="#int-to-bytes" class="headerlink" title="int to bytes"></a>int to bytes</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#to one byte</span></span><br><span class="line">struct.pack(<span class="string">'B'</span>,<span class="number">1</span>) <span class="comment">#==&gt;b'\x01'</span></span><br><span class="line"><span class="comment">#to two bytes</span></span><br><span class="line">struct.pack(<span class="string">'HH'</span>,<span class="number">1</span>,<span class="number">2</span>) <span class="comment">#==&gt;b'\x01\x00\x02\x00'</span></span><br></pre></td></tr></table></figure><h2 id="strings-to-bytes"><a href="#strings-to-bytes" class="headerlink" title="strings to bytes"></a>strings to bytes</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#to syllabified code</span></span><br><span class="line">'12abc'.encode('ascii')  ==&gt;  b'12abc'</span><br><span class="line"><span class="comment">#to hexadecimal bytes</span></span><br><span class="line">bytes().fromhex('010210')  ==&gt;  b'\x01\x02\x10'</span><br></pre></td></tr></table></figure><h2 id="bytes-to-strings"><a href="#bytes-to-strings" class="headerlink" title="bytes to strings"></a>bytes to strings</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#decode to strings</span></span><br><span class="line"> bytes(b'\x31\x32\x61\x62').decode('ascii')  ==&gt;  12ab</span><br><span class="line"><span class="comment">#to hexadecimal bytes</span></span><br><span class="line">str(bytes(b'\x01\x0212'))[2:-1]  ==&gt;  \x01\x0212</span><br><span class="line"></span><br><span class="line">hex to byte</span><br><span class="line">---</span><br><span class="line">```python</span><br><span class="line">hex(16).encode('adcii')  ==&gt;  b'\x10'</span><br></pre></td></tr></table></figure><h2 id="用格式化"><a href="#用格式化" class="headerlink" title="用格式化"></a>用格式化</h2><p><code>`</code><br>print(“%X”%255) #输出大写十六进制的FF<br>各种数据类型之间的转换见博客<a href="http://blog.csdn.net/crylearner/article/details/38521685" target="_blank" rel="noopener">python常用的十进制，十六进制，字符串，字节串之间的转换</a><br>unpack函数的格式见博客<a href="http://blog.csdn.net/w83761456/article/details/21171085" target="_blank" rel="noopener">Python使用struct处理二进制(pack和unpack用法)</a></p>]]></content>
      
      
      <categories>
          
          <category> Python3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>《把时间当作朋友》读书心得</title>
      <link href="/2016/04/02/%E3%80%8A%E6%8A%8A%E6%97%B6%E9%97%B4%E5%BD%93%E4%BD%9C%E6%9C%8B%E5%8F%8B%E3%80%8B%E8%AF%BB%E4%B9%A6%E5%BF%83%E5%BE%97/"/>
      <url>/2016/04/02/%E3%80%8A%E6%8A%8A%E6%97%B6%E9%97%B4%E5%BD%93%E4%BD%9C%E6%9C%8B%E5%8F%8B%E3%80%8B%E8%AF%BB%E4%B9%A6%E5%BF%83%E5%BE%97/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>李开复说过“看过的我会忘记，听过的我会记得，做过的我会理解”。这大概就是我想写写读书心得的原因吧，只为加深对一本书的理解。最近读了李笑来的《把时间当作朋友》一书，深有感悟，怎么说呢，用他本人的话来讲，这不是一本关于时间管理的书，也不是一本成功学的书，更不是心灵鸡汤式的书，更更不是一本讲大道理的书，它仅仅提倡的是要学会正确地运用心智使自己获得解放。他提倡的许多思维方式、思考方法很独特，但是却真的很有道理。<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">要管理的不是时间，而是自己</span><br><span class="line">用正确的方式做正确的事情</span><br><span class="line">运用心智--------&gt;获得解放</span><br><span class="line">一切都靠积累</span><br></pre></td></tr></table></figure></p><h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><p>想了很久，纠结于如何较好的呈现这个读书心得，最后还是决定按照原书的目录结构来吧，主要是提取一些我觉得很有说服性的一些话语。<br></p><h2 id="困境"><a href="#困境" class="headerlink" title="-困境-"></a>-困境-</h2><h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><p>我们没能按时完成任务的原因及相应解决方法如下表</p><table><thead><tr><th>问题</th><th>解决方法</th></tr></thead><tbody><tr><td>没有按时开始执行任务</td><td>按时开始执行任务</td></tr><tr><td>错误估算完成任务所需时间</td><td>正确估算完成任务所需时间</td></tr><tr><td>在任务的执行过程中出现了差错</td><td>在执行任务的过程中不要出差错</td></tr></tbody></table><h4 id="慌乱"><a href="#慌乱" class="headerlink" title="慌乱"></a>慌乱</h4><p>既勤奋又懒惰，时间恐慌症—&gt;瞎忙，方法不正确</p><h4 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h4><p>自身要意识到：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">我们无法管理时间</span><br><span class="line">我们真正能管理的，是我们自己</span><br><span class="line">人们很难接受与已知知识和经验相左的信息或 观念</span><br></pre></td></tr></table></figure></p><p>解决问题的核心只有一个：<code>一切都靠积累.</code></p><h2 id="醒悟"><a href="#醒悟" class="headerlink" title="-醒悟-"></a>-醒悟-</h2><h4 id="孰主孰仆"><a href="#孰主孰仆" class="headerlink" title="孰主孰仆"></a>孰主孰仆</h4><p>我们可以用自己的大脑控制自己的大脑。要意识到关于自身的“自己不知道的”和“自己不知道、别人也不知道的”的存在。<code>运用心智获得解放，别再让自己跟着感觉走。</code></p><h4 id="何谓心智"><a href="#何谓心智" class="headerlink" title="何谓心智"></a>何谓心智</h4><p>简单的说，一个人的心智就是其过往获得的一切知识及经验的总和（包括基于这些知识和经验造就的思考方法、思考模式）。</p><h2 id="现实"><a href="#现实" class="headerlink" title="-现实-"></a>-现实-</h2><h4 id="速成绝无可能"><a href="#速成绝无可能" class="headerlink" title="速成绝无可能"></a>速成绝无可能</h4><p>总是不由自主的期望速成的根源：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">自己的欲望无限</span><br><span class="line">要完成的事情太多</span><br><span class="line">自我满意度的不断下降</span><br></pre></td></tr></table></figure></p><p>出路只有一个起点，那就是接受现实。告诉自己：<code>我有不足，我需要时间，我没办法一蹴而就。</code></p><h4 id="交换才是硬道理"><a href="#交换才是硬道理" class="headerlink" title="交换才是硬道理"></a>交换才是硬道理</h4><p>要学会用正确的方式去拿<code>我有的</code>交换<code>我想要的。</code></p><h4 id="完美永不存在"><a href="#完美永不存在" class="headerlink" title="完美永不存在"></a>完美永不存在</h4><p>越是能力差的人，越有那种非常不现实又极其脆弱的完美主义倾向。往往所谓的“做不好”，其实是“不能一下子做好”，但问题在于，没有什么事情是能够一下做好的。</p><h4 id="未知永远存在"><a href="#未知永远存在" class="headerlink" title="未知永远存在"></a>未知永远存在</h4><p>我们害怕未知，害怕不确定的东西，但必须意识都未知永远存在，要尝试适应在未知中前行。焦虑是导致时间浪费、效率底下的根源之一。<code>当有问题解决不了时，可以先把它记下来，然后继续前行。</code></p><h4 id="现状无法马上摆脱"><a href="#现状无法马上摆脱" class="headerlink" title="现状无法马上摆脱"></a>现状无法马上摆脱</h4><p>没有人能够逃脱现实的束缚。接受现状才是最优策略—-&gt;有什么做什么，有什么用什么；做什么都做好，用什么都用好。</p><h4 id="与时间做朋友"><a href="#与时间做朋友" class="headerlink" title="与时间做朋友"></a>与时间做朋友</h4><p>与时间做朋友的方法很简单：<code>用正确的方法做正确的事情</code></p><h2 id="管理"><a href="#管理" class="headerlink" title="-管理-"></a>-管理-</h2><h4 id="估算时间"><a href="#估算时间" class="headerlink" title="估算时间"></a>估算时间</h4><p>墨菲定律：凡事只要可能出错，就会出错<br><br>侯士达法则：完成一个任务实际花费的时间总会超过计划花费的时间，就算制定计划的时候考虑到本法则，也不能避免这种情况的发生。<br><br>提高估算时间的能力：做任何事情之前先判断其熟悉程度，再据此判断估算完成任务所需要的时间。</p><h4 id="及时行动"><a href="#及时行动" class="headerlink" title="及时行动"></a>及时行动</h4><p>从现在就开始，能做多好就做多好，总好过什么都不做。没有必要在意来自他人的、非建设性的负面评价。没有谁一开始就能做对、就能做好。所有做对、做好的人都是一路磕磕绊绊走过来的，这就是生活的常态。</p><h4 id="直面困难"><a href="#直面困难" class="headerlink" title="直面困难"></a>直面困难</h4><p>很多人实际上根本不知道自己所谓的“喜欢做某件事情”很可能只是因为那件事情相对简单、容易获得奖励而已。所有真正踏实做事的人都知道，任何任务的绝大部分都是枯燥而又无趣的，所谓有创意的部分，可能连1%都不到。</p><h4 id="关注步骤"><a href="#关注步骤" class="headerlink" title="关注步骤"></a>关注步骤</h4><p>做任何事情前要考虑三方面：内容<code>What</code>，原因<code>Why</code>，方法<code>How</code><br><br>大多数人都知道自己究竟想要什么，也知道为什么要得到，却始终没有弄明白怎样做才能得到。</p><h4 id="并行串行"><a href="#并行串行" class="headerlink" title="并行串行"></a>并行串行</h4><p>并行做机械事情和非机械事情。番茄工作法，保持相对长时间的高效率工作。</p><h4 id="感知时间-记录开销"><a href="#感知时间-记录开销" class="headerlink" title="感知时间 记录开销"></a>感知时间 记录开销</h4><p>可以用一个table来记录每天的活动，基于过程的记录要比基于结果的记录更为详尽。</p><table><thead><tr><th>事项</th><th>耗时</th></tr></thead><tbody><tr><td><strong>*</strong></td><td>—</td></tr><tr><td>@</td><td>—</td></tr></tbody></table><h4 id="制定预算"><a href="#制定预算" class="headerlink" title="制定预算"></a>制定预算</h4><p>根据事情的轻重缓急来制定时间预算。</p><h4 id="计划"><a href="#计划" class="headerlink" title="计划"></a>计划</h4><p>Peopel don’t plan to fail,they fail to plan.计划成功的前提：<code>目标现实可行</code><br>长期计划是需要通过实践才能习得的能力。有些时候没必要做计划，因为计划固然重要，行动更为重要。</p><h4 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h4><p>学习、工作和生活中，面对重复性的任务时，先将其做完一次，然后马上总结、整理，搞清流程，再考进一步的实践把它变成“闭着眼睛也能做好”的事，这样能提高效率。</p><h4 id="预演"><a href="#预演" class="headerlink" title="预演"></a>预演</h4><p>万事皆可提前准备，万事皆需提前准备。如果不能克服恐惧，那就提前做好准备迎接恐惧、适应恐惧。</p><h4 id="验收"><a href="#验收" class="headerlink" title="验收"></a>验收</h4><p>做事总是半途而废，往往是没有做好验收机制。</p><h2 id="学习"><a href="#学习" class="headerlink" title="-学习-"></a>-学习-</h2><h4 id="效率本质"><a href="#效率本质" class="headerlink" title="效率本质"></a>效率本质</h4><p>学习是投资回报率最高的行为，千万不要拒绝学习。</p><h4 id="基本途径"><a href="#基本途径" class="headerlink" title="基本途径"></a>基本途径</h4><p>观察、体验、试错（低级）—&gt;阅读（高级）</p><h4 id="主要手段"><a href="#主要手段" class="headerlink" title="主要手段"></a>主要手段</h4><p>除了基本途径外，<code>正确的思考，才是获取真正意义上的知识的主要手段</code></p><h4 id="经验局限"><a href="#经验局限" class="headerlink" title="经验局限"></a>经验局限</h4><p>个体、群体的经验都有限，不仅存在无法通过个体或者群体经验获得的知识，还存在与现有经验相悖的知识。</p><h4 id="自学能力"><a href="#自学能力" class="headerlink" title="自学能力"></a>自学能力</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">自学能力的基础是阅读理解能力；</span><br><span class="line">检索能力建立在相当熟练的阅读理解能力的基础之上；</span><br><span class="line">写作能力在自学能力中占据重要位置；</span><br><span class="line">实践能力是自学能力最终转化为真正价值的根本。</span><br></pre></td></tr></table></figure><p>永远保持开放的心态，不要成为对信息和知识“选择性输入”的受害者。正确理解学习中时间和进展的关系曲线。</p><h2 id="思考"><a href="#思考" class="headerlink" title="-思考-"></a>-思考-</h2><h4 id="勤于思考"><a href="#勤于思考" class="headerlink" title="勤于思考"></a>勤于思考</h4><p>独立思考，就是从别人知道一个结论的时候，自己动脑重新推演一遍，看看得出的结论有没有漏洞或者不合理的地方，衡量一下结论到底有没有道理的过程。<br></p><blockquote><pre>most people would die sooner than think ---in fact they do so.                                          --Bertrand Russell,                                      The ABC of Relativity,1925     译文：很多人宁愿死也不思考。事实上，他们确实死的很快。     </pre></blockquote><h4 id="思维陷阱"><a href="#思维陷阱" class="headerlink" title="思维陷阱"></a>思维陷阱</h4><p>犯逻辑错误的最重要的两个原因：<code>概念不清</code>和<code>拒绝接受不确定性</code></p><h4 id="克服恐惧"><a href="#克服恐惧" class="headerlink" title="克服恐惧"></a>克服恐惧</h4><p>恐惧需要克服，勇气需要培养</p><h2 id="交流"><a href="#交流" class="headerlink" title="-交流-"></a>-交流-</h2><h4 id="学会倾听"><a href="#学会倾听" class="headerlink" title="学会倾听"></a>学会倾听</h4><p>事实上，大多数人并不懂得应该如何有效地倾听。为了真正做到有效倾听，最需要克制的就是“过早质疑”。倾听的过程中，可以利用多余的脑力处理两个方向的信息：“回顾”与“预期”。一旦决定倾听，就要迅速帮助说者进入“倾听”状态。</p><h4 id="说与不说"><a href="#说与不说" class="headerlink" title="说与不说"></a>说与不说</h4><p>可言而不言，失人，不可言而言，失言。</p><h4 id="交流守则"><a href="#交流守则" class="headerlink" title="交流守则"></a>交流守则</h4><blockquote><pre>    - Everyone makes his or her own truth.    - One person's truth is another person's error.    - Truth is relative.    - Truth is constantly changing.    - All ideas are equal.</pre></blockquote><p><em>第一个原则</em>：有意义的讨论的前提是双方不仅要“相互竞争”，更要“相互合作”。<br><br><em>第二个原则</em>：真理是独立存在的，他从来不会依附于任何个人或者集体。<br><br><em>第三个原则</em>：真理不变，也不会因任何人而变；不停变化的只是人们对真理的解释或理解。<br></p><h4 id="正确复述"><a href="#正确复述" class="headerlink" title="正确复述"></a>正确复述</h4><p>为了保证沟通顺利，往往需要添加一个验证机制，或者说反馈机制。</p><h4 id="勤于反思"><a href="#勤于反思" class="headerlink" title="勤于反思"></a>勤于反思</h4><blockquote><pre>       - 深刻了解经验的局限 -->       - 时时刻刻保持警惕   -->                            - 使用记录，使自己能够记住更多经验  -->                            - 通过观察和阅读汲取他人的经验      -->                            - 试用类比来跨越未知与已知的障碍    -->                                                                -静心等待以拥有不能快速获得的经验  --*</pre></blockquote><h2 id="应用"><a href="#应用" class="headerlink" title="-应用-"></a>-应用-</h2><h4 id="兴趣"><a href="#兴趣" class="headerlink" title="兴趣"></a>兴趣</h4><p>往往不是有兴趣才能做好，而是做好了才有兴趣。</p><h4 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h4><p>方法固然重要，但是比起“用功”来说，方法几乎可以忽略不计。</p><h4 id="运气"><a href="#运气" class="headerlink" title="运气"></a>运气</h4><p>相信运气其实是缺乏自制力的表现。尽管对生活不应该盲目乐观，但一定不能失望悲观。</p><h4 id="人脉"><a href="#人脉" class="headerlink" title="人脉"></a>人脉</h4><p>承认自己能力有限，是保持心理健康的前提。每个人的时间都是有限的，所以，“真正的好朋友”谁都只有几个而已。</p><blockquote><pre>    - 专心做可以提升自己的事情，学习并拥有更多\更好的技能，成为一个值得他人交往的人    - 学会独善其身，以不给他人制造麻烦为美德，拥自己的独立赢得尊重</pre></blockquote><h4 id="自卑"><a href="#自卑" class="headerlink" title="自卑"></a>自卑</h4><p>在自己的语言中，把“优点”和“缺点”这两个词替换成“特点”。</p><h4 id="鼓励"><a href="#鼓励" class="headerlink" title="鼓励"></a>鼓励</h4><p>永远鼓励身边的人，哪怕多少有些盲目。</p><h4 id="效率"><a href="#效率" class="headerlink" title="效率"></a>效率</h4><p>任何人都不可能100%地有效率，至少不可能总是100%地有效率。</p><h4 id="物极必反"><a href="#物极必反" class="headerlink" title="物极必反"></a>物极必反</h4><p>绝对不要盲目地试图减少睡眠时间；尽量不要减少与家人交流的时间；最好不要放弃自己的社交时间。</p><h2 id="积累"><a href="#积累" class="headerlink" title="积累"></a>积累</h2><p>越早醒悟越好，要坚信积累的力量。</p><h1 id="闲语"><a href="#闲语" class="headerlink" title="闲语"></a>闲语</h1><p>花了将近5个小时，简单的写了一下《把时间当做朋友》的读书心得，第一次在博客上写读书心得，自我感觉写的不咋地吧。废话太多，要点提取的不太够，甚少加入自己思考过后的元素。还是要向打什么呢多学习学习写读书心得的技巧啊。无论如何，慢慢来吧，多积累。Keep fighting!!!</p>]]></content>
      
      
      <categories>
          
          <category> 读书心得 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Time Management </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>MongoDB的安装及使用</title>
      <link href="/2016/03/30/Mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/"/>
      <url>/2016/03/30/Mongodb%E7%9A%84%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install mongodb</span><br></pre></td></tr></table></figure><h2 id="关闭-开启"><a href="#关闭-开启" class="headerlink" title="关闭/开启"></a>关闭/开启</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo service mongodb stop</span><br><span class="line">sudo service mongodb start</span><br></pre></td></tr></table></figure><h2 id="创建MongoDB存放数据的‘dbpath’"><a href="#创建MongoDB存放数据的‘dbpath’" class="headerlink" title="创建MongoDB存放数据的‘dbpath’"></a>创建MongoDB存放数据的‘dbpath’</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 根目录下</span></span><br><span class="line">sudo mkdir /data</span><br><span class="line">sudo mkdir db</span><br></pre></td></tr></table></figure><h2 id="设置连接用户"><a href="#设置连接用户" class="headerlink" title="设置连接用户"></a>设置连接用户</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mongo</span><br><span class="line">&gt; use admin</span><br><span class="line">switched to db admin</span><br><span class="line">&gt; db.addUser(&quot;root&quot;,&quot;1983&quot;)</span><br></pre></td></tr></table></figure><h2 id="设置客户端连接"><a href="#设置客户端连接" class="headerlink" title="设置客户端连接"></a>设置客户端连接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo gedit /etc/mongodb.conf</span><br><span class="line">#bind_ip = 0.0.0.0</span><br></pre></td></tr></table></figure><h2 id="切换数据库"><a href="#切换数据库" class="headerlink" title="切换数据库"></a>切换数据库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use &quot;dbname&quot;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MongoDB </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Git operations</title>
      <link href="/2016/03/28/Git%20operations/"/>
      <url>/2016/03/28/Git%20operations/</url>
      
        <content type="html"><![CDATA[<p></p><p hidden="true">2016/3/28</p><br>useful links<a href="https://git-scm.com/book/zh/v1" target="_blank" rel="noopener">Git</a><p></p><h4 id="check-existed-configuration-information"><a href="#check-existed-configuration-information" class="headerlink" title="check existed configuration information"></a>check existed configuration information</h4><p><code>git config --list</code></p><h4 id="change-the-default-editor"><a href="#change-the-default-editor" class="headerlink" title="change the default editor"></a>change the default editor</h4><p><code>git config --global core.editor vim</code></p><h4 id="get-help"><a href="#get-help" class="headerlink" title="get help"></a>get help</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git help &lt;verb&gt;</span><br></pre></td></tr></table></figure><h4 id="Git-init-and-config-initially"><a href="#Git-init-and-config-initially" class="headerlink" title="Git init and config initially"></a>Git init and config initially</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line">git add README</span><br><span class="line">git commit -m &apos;initial project version&apos;</span><br></pre></td></tr></table></figure><h4 id="clone-the-remote-repository"><a href="#clone-the-remote-repository" class="headerlink" title="clone the remote repository"></a>clone the remote repository</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git://github.com/langhf/langhf.github.io</span><br></pre></td></tr></table></figure><h4 id="check-status-of-the-present-files"><a href="#check-status-of-the-present-files" class="headerlink" title="check status of the present files"></a>check status of the present files</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><h4 id="the-gitignore-file"><a href="#the-gitignore-file" class="headerlink" title="the .gitignore file"></a>the .gitignore file</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 此为注释 – 将被 Git 忽略</span><br><span class="line"># 忽略所有 .a 结尾的文件</span><br><span class="line">*.a</span><br><span class="line"># 但 lib.a 除外</span><br><span class="line">!lib.a</span><br><span class="line"># 仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO</span><br><span class="line">/TODO</span><br><span class="line"># 忽略 build/ 目录下的所有文件</span><br><span class="line">build/</span><br><span class="line"># 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt</span><br><span class="line">doc/*.txt</span><br><span class="line"># ignore all .txt files in the doc/ directory</span><br><span class="line">doc/**/*.txt</span><br></pre></td></tr></table></figure><h4 id="remove-files"><a href="#remove-files" class="headerlink" title="remove files"></a>remove files</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm *filename*</span><br></pre></td></tr></table></figure><h4 id="view-the-existed-remote-repositories"><a href="#view-the-existed-remote-repositories" class="headerlink" title="view the existed remote repositories"></a>view the existed remote repositories</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote</span><br></pre></td></tr></table></figure><h4 id="add-new-remote-repository"><a href="#add-new-remote-repository" class="headerlink" title="add new remote repository"></a>add new remote repository</h4><p>要添加一个新的远程仓库，可以指定一个简单的名字，以便将来引用，运行 <code>git remote add [shortname] [url]</code>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git remote</span><br><span class="line">origin</span><br><span class="line">$ git remote add pb git://github.com/paulboone/ticgit.git</span><br><span class="line">$ git remote -v</span><br><span class="line">origin  git://github.com/schacon/ticgit.git</span><br><span class="line">pb  git://github.com/paulboone/ticgit.git</span><br></pre></td></tr></table></figure></p><h4 id="推送数据到远程仓库"><a href="#推送数据到远程仓库" class="headerlink" title="推送数据到远程仓库"></a>推送数据到远程仓库</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//git push [remote-name] [branch-name]</span></span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>After installing ubuntu15.10</title>
      <link href="/2016/03/27/After%20installing%20ubuntu15.0/"/>
      <url>/2016/03/27/After%20installing%20ubuntu15.0/</url>
      
        <content type="html"><![CDATA[<p></p><p hidden="true">2016/3/27</p><p></p><h2 id="1-modify-you-hosts-file"><a href="#1-modify-you-hosts-file" class="headerlink" title="1.modify you hosts file"></a>1.modify you <em>hosts</em> file</h2><p>First of all,visit <a href="http://www.laod.cn" target="_blank" rel="noopener">http://www.laod.cn</a> and download the hosts file.Then,copy the content in the downloaded file into your local hosts file which locates in <code>/etc/hosts</code>.Just excute the command:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/hosts</span><br></pre></td></tr></table></figure><p><hr></p><h2 id="2-update-and-upgrade-your-system"><a href="#2-update-and-upgrade-your-system" class="headerlink" title="2.update and upgrade your system"></a>2.update and upgrade your system</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></table></figure><p><hr></p><h2 id="3-set-up-the-Chinese-input-method-–pinyin"><a href="#3-set-up-the-Chinese-input-method-–pinyin" class="headerlink" title="3.set up the Chinese input method –pinyin"></a>3.set up the Chinese input method –pinyin</h2><p>click the keyboard icon in the top-rhight corner of your computer and enter the <code>Set up Fcitx</code> to select Chinese input method –pinyin.</p><p><hr></p><h2 id="4-install-the-google-chrome-browser"><a href="#4-install-the-google-chrome-browser" class="headerlink" title="4.install the google-chrome browser"></a>4.install the google-chrome browser</h2><p>visit <a href="https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb" target="_blank" rel="noopener">https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb</a> download the latest package.and then,<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libappindicator1 libindicator7 </span><br><span class="line">sudo dpkg -i google-chrome-stable_current_amd64.deb </span><br><span class="line">sudo apt-get -f install</span><br></pre></td></tr></table></figure></p><p>Then install <code>Postman</code>.</p><p><hr></p><h2 id="5-install-the-Sublime-Text-3"><a href="#5-install-the-Sublime-Text-3" class="headerlink" title="5.install the Sublime Text 3"></a>5.install the Sublime Text 3</h2><p>firstly,go to <code>/usr/bin</code>,and then<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:webupd8team/sublime-text-3</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install sublime-text</span><br></pre></td></tr></table></figure></p><p>after install the application,you should try to install some useful plugins.In order to init the <code>package control</code>,you can refer to the website <a href="https://packagecontrol.io/installation#st3" target="_blank" rel="noopener">Installation - Package Control</a>.For some uesful packages,you can refer<a href="http://www.tuicool.com/articles/im2y6f" target="_blank" rel="noopener">常用的sublime插件（很爽哦）</a>.Personally,I recommend <code>OmniMarkupPreviewer</code>,  <code>SublimeCodeIntel</code>, <code>BracketHighlighter</code>, <code>Color Highlighter</code> ,<code>Emmet</code>,<code>Pretty JSON</code>git</p><p><hr></p><h2 id="6-install-Git"><a href="#6-install-Git" class="headerlink" title="6.install Git"></a>6.install Git</h2><p>firstly,go to <code>/usr/bin</code>,and then<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure></p><p><hr></p><h2 id="7-configure-the-LAMP-environment"><a href="#7-configure-the-LAMP-environment" class="headerlink" title="7.configure the LAMP environment"></a>7.configure the LAMP environment</h2><p>for  detailed tutorial,you can refer to <a href="http://www.jianshu.com/p/734e113eae50" target="_blank" rel="noopener">Ubuntu 安装 LAMP Server (Debian 系通用)</a></p><p><hr></p><h2 id="8-install-memcache"><a href="#8-install-memcache" class="headerlink" title="8.install memcache"></a>8.install memcache</h2><p>refer to the passage <a href="http://www.linuxde.net/2013/07/14890.html" target="_blank" rel="noopener">Ubuntu + LAMP 增加Memcache扩展模块</a><br>and <a href="http://blog.sina.com.cn/s/blog_643921350102vne6.html" target="_blank" rel="noopener">关于Ubuntu下安装phpmyadmin后mysqli丢失的解决</a>.<br>All the PHP extended module is located in <code>/usr/lib/php5/20131226</code>.To enable a module,we should modify the file <code>/etc/php5/apache2/php.ini</code>. And all module’s configuration file are in <code>/etc/php5/mods-available</code>.Modify two places in the <code>php.ini</code>.<br></p><h4 id="one"><a href="#one" class="headerlink" title="one"></a>one</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">; Directory in which the loadable extensions (modules) reside.</span><br><span class="line"> ; http://php.net/extension-dir</span><br><span class="line">extension_dir = &quot;/usr/lib/php5/20131226/&quot;</span><br><span class="line">; On windows:</span><br><span class="line">; extension_dir = &quot;ext&quot;</span><br></pre></td></tr></table></figure><h4 id="two"><a href="#two" class="headerlink" title="two"></a>two</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">;;;;;;;;;;;;;;;;;;;;;</span><br><span class="line">; Dynamic Extensions ;</span><br><span class="line">;;;;;;;;;;;;;;;;;;;;;;</span><br><span class="line"></span><br><span class="line">; If you wish to have an extension loaded automatically, use the following</span><br><span class="line">; syntax:</span><br><span class="line">;</span><br><span class="line">;   extension=modulename.extension</span><br><span class="line">;</span><br><span class="line">; For example, on Windows:</span><br><span class="line">;</span><br><span class="line">;  extension=msql.dll</span><br><span class="line">;</span><br><span class="line">; ... or under UNIX:</span><br><span class="line">;</span><br><span class="line">extension=msql.so</span><br><span class="line">;</span><br></pre></td></tr></table></figure><p><hr></p><h2 id="9-turn-on-the-error-reporting-of-PHP"><a href="#9-turn-on-the-error-reporting-of-PHP" class="headerlink" title="9.turn on the  error_reporting of PHP"></a>9.turn on the  error_reporting of PHP</h2><p>refer to <a href="http://os.51cto.com/art/201103/248680.htm" target="_blank" rel="noopener">Ubuntu下LAMP的PHP错误提示的开启</a>.</p><p><hr></p><h2 id="10-favorite-links-in-Microsoft-Edge-browser"><a href="#10-favorite-links-in-Microsoft-Edge-browser" class="headerlink" title="10.favorite links in Microsoft Edge browser"></a>10.favorite links in Microsoft Edge browser</h2><p>/media/lang/系统/Users/lang/AppData/Local/Packages/Microsoft.MicrosoftEdge_8wekyb3d8bbwe/AC/MicrosoftEdge/User/Default/Favorites.</p><p><hr></p><h2 id="11-configure-virtual-hosts"><a href="#11-configure-virtual-hosts" class="headerlink" title="11.configure virtual hosts"></a>11.configure virtual hosts</h2><p>In <code>/etc/apache2/sites-available</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">​        ServerName mobileportals.local</span><br><span class="line">​        ServerAdmin webmaster@test.tools.directhr.net</span><br><span class="line">​        DocumentRoot &quot;/var/www/html/mobileportals&quot;</span><br><span class="line">​        &lt;Directory &quot;/var/www/html/mobileportals&quot;&gt;</span><br><span class="line">​                Options Indexes FollowSymLinks</span><br><span class="line">​                AllowOverride All</span><br><span class="line">​                Order allow,deny</span><br><span class="line">​                Allow from all</span><br><span class="line">​        &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure></p><p>In <code>/etc/hosts</code><br>​<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//add this ip</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>   mobileportals.local</span><br></pre></td></tr></table></figure></p><p>Then<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo a2ensite mobileportals.local.conf</span><br><span class="line">sudo service apache2 restart</span><br></pre></td></tr></table></figure></p><p><hr></p><h2 id="12-解决Ubuntu下Sublime-Text-3无法输入中文"><a href="#12-解决Ubuntu下Sublime-Text-3无法输入中文" class="headerlink" title="12.解决Ubuntu下Sublime Text 3无法输入中文"></a>12.解决Ubuntu下Sublime Text 3无法输入中文</h2><p>refer to <a href="http://www.jianshu.com/p/bf05fb3a4709" target="_blank" rel="noopener">解决Ubuntu下Sublime Text 3无法输入中文</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">我尼玛终于能输入中文了，再也不需要从其他地方复制中文了。</span><br></pre></td></tr></table></figure></p><p>但是每次都要通过命令行执行<code>subl</code>才能输入中文</p><p><hr></p><h2 id="13-装搜狗输入法"><a href="#13-装搜狗输入法" class="headerlink" title="13.装搜狗输入法"></a>13.装搜狗输入法</h2><p>去官网直接下载即可<br><a href="http://pinyin.sogou.com/linux/" target="_blank" rel="noopener">搜狗输入法 for linux</a></p><p><hr></p><h2 id="14-管理系统服务"><a href="#14-管理系统服务" class="headerlink" title="14.管理系统服务"></a>14.管理系统服务</h2><p><a href="http://www.tsingpost.com/articles/201312/294.html" target="_blank" rel="noopener">三款不错的管理Ubuntu服务和启动项的软件</a><br>我装的是<code>bum</code>使用时在命令行输入<code>sudo bum</code>即可</p><p><hr></p><h2 id="15-Ubuntu输入su提示认证失败的解决方法"><a href="#15-Ubuntu输入su提示认证失败的解决方法" class="headerlink" title="15.Ubuntu输入su提示认证失败的解决方法"></a>15.Ubuntu输入su提示认证失败的解决方法</h2><p><a href="http://blog.csdn.net/henren555/article/details/7546508" target="_blank" rel="noopener">Ubuntu输入su提示认证失败的解决方法</a></p><p><hr></p><h2 id="16-ubuntu-开机自动挂载指定磁盘分区"><a href="#16-ubuntu-开机自动挂载指定磁盘分区" class="headerlink" title="16. ubuntu 开机自动挂载指定磁盘分区"></a>16. ubuntu 开机自动挂载指定磁盘分区</h2><p><a href="http://blog.csdn.net/zhangyongjun_2012/article/details/9089669" target="_blank" rel="noopener"> ubuntu 开机自动挂载指定磁盘分区</a></p><p><hr></p><h2 id="17-close-system-service"><a href="#17-close-system-service" class="headerlink" title="17.close system service"></a>17.close system service</h2><p>The most useful commands:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install sysv-rc-conf</span><br><span class="line">sudo sysv-rc-conf</span><br></pre></td></tr></table></figure></p><p>but the service <code>mysql</code> should be shut down by configuring the file in <code>/etc/init/mysql.conf</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># MySQL Service</span><br><span class="line"></span><br><span class="line">description     &quot;MySQL Server&quot;</span><br><span class="line">author          &quot;Mario Limonciello &lt;superm1@ubuntu.com&gt;&quot;</span><br><span class="line"></span><br><span class="line">start on runlevel [2345]</span><br><span class="line">stop on starting rc RUNLEVEL=[016]</span><br><span class="line"></span><br><span class="line">respawn</span><br><span class="line">respawn limit 2 5</span><br></pre></td></tr></table></figure></p><p><hr></p><h2 id="18-usual-operation-commands-and-key-bindings"><a href="#18-usual-operation-commands-and-key-bindings" class="headerlink" title="18.usual operation commands and key bindings"></a>18.usual operation commands and key bindings</h2><p><a href="http://www.letboo.com/thread-166-1-1.html" target="_blank" rel="noopener">ubuntu 终端关机启动命令 和 常用的快捷键</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo  reboot   （直接重启系统）</span><br><span class="line">sudo  shutdown  -r  now  （立刻重启)</span><br><span class="line">sudo  poweroff    （立刻关机）</span><br></pre></td></tr></table></figure></p><p><hr></p><h2 id="19-install-WPS-office"><a href="#19-install-WPS-office" class="headerlink" title="19.install WPS office"></a>19.install WPS office</h2><p>安装方式.<br><br><a href="http://community.wps.cn/download/" target="_blank" rel="noopener">WPS下载地址</a><br><br><a href="http://download.csdn.net/download/qq_24146957/9406046" target="_blank" rel="noopener">字体文件</a><br><br>以上安装包双击即可安装。<br>终端命令对应启动word，excel，ppt<br>​<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wps   <span class="comment">//word</span></span><br><span class="line">et      <span class="comment">//excel</span></span><br><span class="line">wpp  <span class="comment">//ppt</span></span><br></pre></td></tr></table></figure></p><p><hr></p><h2 id="20-装Eclipse"><a href="#20-装Eclipse" class="headerlink" title="20.装Eclipse"></a>20.装Eclipse</h2><p>先装JAVA7环境<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openjdk-7-jre</span><br></pre></td></tr></table></figure></p><p>然后下载最新版的Eclipse<a href="http://www.eclipse.org/downloads/" target="_blank" rel="noopener">www.eclipse.org/downloads</a></p><p><hr></p><h2 id="21-Ubuntu下非常给力的下载工具–uget-aria2"><a href="#21-Ubuntu下非常给力的下载工具–uget-aria2" class="headerlink" title="21.Ubuntu下非常给力的下载工具–uget+aria2"></a>21.Ubuntu下非常给力的下载工具–uget+aria2</h2><p><a href="http://ugetdm.com/downloads" target="_blank" rel="noopener">Ubuntu下非常给力的下载工具–uget+aria2</a></p><p><hr></p><h2 id="22-music"><a href="#22-music" class="headerlink" title="22.music"></a>22.music</h2><p><a href="https://github.com/darknessomi/musicbox" target="_blank" rel="noopener">NetEase-MusicBox</a><br>links <a href="http://blog.163.com/thinki_cao/blog/static/839448752012112694037995/" target="_blank" rel="noopener">Ubuntu下关闭apache和mysql的开机启动</a></p><h2 id="useful-links"><a href="#useful-links" class="headerlink" title="useful links"></a>useful links</h2><p><a href="http://blog.csdn.net/skykingf/article/details/45267517" target="_blank" rel="noopener">安装Ubuntu 15.10后要做的事 </a><br><br><a href="http://yanceywang.com/2015/07/30/Ubuntu+Hexo+GithubPages%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/" target="_blank" rel="noopener">Hexo+Ubuntu+GithubPages搭建个人博客(基础篇)</a><br></p>]]></content>
      
      
      <categories>
          
          <category> Personal </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu15.10 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Markdown学习与实践</title>
      <link href="/2016/03/06/Markdown%E5%AD%A6%E4%B9%A0%E4%B8%8E%E5%AE%9E%E8%B7%B5/"/>
      <url>/2016/03/06/Markdown%E5%AD%A6%E4%B9%A0%E4%B8%8E%E5%AE%9E%E8%B7%B5/</url>
      
        <content type="html"><![CDATA[<h2 id="block-list"><a href="#block-list" class="headerlink" title="block+list"></a>block+list</h2><blockquote><p><em>hahaha</em>hahahaha<br>*hahahhahaha</p></blockquote><h2 id="add-img"><a href="#add-img" class="headerlink" title="add img"></a>add img</h2><p><img src="/images/avatar.jpg" alt="my avatar img" title="Single dog"></p><h2 id="a-Todo-list"><a href="#a-Todo-list" class="headerlink" title="a Todo list"></a>a Todo list</h2><ul><li style="list-style: none"><input type="checkbox"> 支持以PDF格式导出文稿</li><li style="list-style: none"><input type="checkbox"> 改进Cmd渲染算法使局部渲染技术提高渲染效率</li><li style="list-style: none"><input type="checkbox" checked> 新增Todo列表</li><li style="list-style: none"><input type="checkbox" checked> 修复LaTex公式渲染问题</li><li style="list-style: none"><input type="checkbox" checked> 新增LaTex公式编号功能</li></ul><h2 id="edit-a-law"><a href="#edit-a-law" class="headerlink" title="edit a law"></a>edit a law</h2><p>$$E=mc^2$$</p><h2 id="highlight-codes"><a href="#highlight-codes" class="headerlink" title="highlight codes"></a>highlight codes</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"Hello world.I'm Markdown."</span>;</span><br></pre></td></tr></table></figure><h2 id="draw-a-flow-（js并没有导入-）"><a href="#draw-a-flow-（js并没有导入-）" class="headerlink" title="draw a flow （js并没有导入 ）"></a>draw a flow （js并没有导入 ）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">st=&gt;start: Start</span><br><span class="line">op=&gt;operation: Your Operation</span><br><span class="line">cond=&gt;condition: Yes or No?</span><br><span class="line">e=&gt;end</span><br><span class="line"></span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;e</span><br><span class="line">cond(no)-&gt;op</span><br></pre></td></tr></table></figure><h2 id="draw-a-session-（js并没有导入-）"><a href="#draw-a-session-（js并没有导入-）" class="headerlink" title="draw a session （js并没有导入 ）"></a>draw a session （js并没有导入 ）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Alice-&gt;Bob: Hello Bob, how are you?</span><br><span class="line">Note right of Bob: Bob thinks</span><br><span class="line">Bob--&gt;Alice: I am good thanks!</span><br></pre></td></tr></table></figure><h2 id="draw-a-table"><a href="#draw-a-table" class="headerlink" title="draw a table"></a>draw a table</h2><table><thead><tr><th>项目</th><th style="text-align:right">价格</th><th style="text-align:center">数量</th></tr></thead><tbody><tr><td>计算机</td><td style="text-align:right">$1600</td><td style="text-align:center">5</td></tr><tr><td>手机</td><td style="text-align:right">$12</td><td style="text-align:center">12</td></tr><tr><td>管线</td><td style="text-align:right">$1</td><td style="text-align:center">234</td></tr></tbody></table><h2 id="add-audio"><a href="#add-audio" class="headerlink" title="add audio"></a>add audio</h2><p><a href="/audio/知足.mp3" title="heihei">五月天-知足</a> </p>]]></content>
      
      
      <categories>
          
          <category> Personal </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 好神奇 </tag>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>用Hexo在Github上搭建个人博客</title>
      <link href="/2016/03/02/%E7%94%A8Hexo%E5%9C%A8Github%E4%B8%8A%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
      <url>/2016/03/02/%E7%94%A8Hexo%E5%9C%A8Github%E4%B8%8A%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="闲话"><a href="#闲话" class="headerlink" title="闲话"></a>闲话</h2><p>之前看一学姐的博客，发现原来可以在Github上免费搭建个人博客，界面元素可完全自己定制，于是上google找攻略，在跳进了几个坑之后，终于是搭建成功了。废话不多说，以下是比较全的教程。</p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>那种高大上的教程，我现在肯定是写不出来的啊，就放上我搜到的经验帖。<br><a href="http://zipperary.com/categories/hexo/" title="hiahia" target="_blank" rel="noopener">使用GitHub和Hexo搭建免费静态Blog</a> </p><p>基本上，上述链接里的教程已经无比完美了。我想分享的是自己踩过的以及被基友们拉进去的坑！</p><h2 id="踩过的坑"><a href="#踩过的坑" class="headerlink" title="踩过的坑"></a>踩过的坑</h2><ul><li>Git和Node.js最好用最新版本，一基友就是因为Git版本过低，而导致   不能建立本地与远程Github的连接。</li><li><p>如果发现使用不了<code>hexo deploy</code>指令，那么需要执行以下指令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>如果还不能使用<code>hexo deploy</code>，那么可能是没有设置Github的SSH，具体教程请看官方教程<a href="https://help.github.com/articles/generating-an-ssh-key" target="_blank" rel="noopener">Generating an SSH key</a></p></li><li>最大的坑是，你所创建的Github仓库名，一定要是如下格式<em>username.github.io</em>，其中<em>username</em>是你的Github账户名。</li></ul><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>第一次用Markdown写博客，好多都不会，暂时先写到这吧，还要看高数去。<br>WTF.How miserable a KY-S dog is!!!</p>]]></content>
      
      
      <categories>
          
          <category> 折腾 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 多坑 </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
